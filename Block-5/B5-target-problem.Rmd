# The target problem {#target-problem}

```{r include=FALSE}
library(Znotes)
```
::: {.underconstruction}
Chapter not yet released
:::

::: {style="float:right;"}
[![](www/icons/edit.png)](https://github.com/ProjectMOSAIC/MOSAIC-Calculus/blob/main/Block-5/B5-target-problem.Rmd)
:::

> *"In theory there is no difference between theory and practice, while in practice there is."*

In this chapter, we ask you to reconsider a mathematical theory that is universally taught in high-school and to consider augmenting it with newer computational ideas that address the same kind of problems, but which produce useful results even when the mathematical theory insists the "a solution does not exist."

The time-honored theory is that taught in high-school algebra. There's nothing wrong with that theory except that it is incomplete and doesn't address the needs of present-day practice, particularly in data science, statistics, and machine learning.

Algebra, in its basic sense, is about generalizing arithmetic to handle situations where some quantities are not yet known numerically and so are represented by symbols. The algebra student learns rules for symbolic expressions that allow the expressions to be re-arranged into other forms that would clearly be valid if replaced by numbers. Some examples of these rules:

i\. $ax = b$ is equivalent to $x = a/b$.

ii\. $a + x = b$ is equivalent to $x=b-a$.

iii\. $a x^2 + b x + c = 0$ is equivalent to $x = \frac{-b\pm \sqrt{\strut b^2 - 4ac}}{2a}$.

iv\. $\ln(ax) = b$ is equivalent to $x = \frac{1}{a}\ln(b)$.

A major challenge to the algebra student is to use such rules to re-arrange expressions into a form $x=$ that enables $x$ to be calculated from the numerical values of the other symbols. Unfortunately, students are given little or no insight to the historical origins of algebra techniques and why they are not necessarily appropriate for all tasks.

In English, the word "algebra" is seen as early as 1551. It comes from a book written by the Persian Muhammad ibn Musa al-Khwarizmi (780-850), *The Compendious Book on Calculation by Completion and Balancing*. The book introduced the use of rules familiar to every algebra student. In the original Arabic, the title includes the word "al-jabr," meaning "completion" or "rejoining." According to some sources, the literal meaning of "al-jabr" was resetting and rejoining broken bones. That literal meaning correctly conveys the importance of the subject, but also the pain endured by many algebra students. (Incidentally, the "algorithm" comes from the name of the book's author: al Khwarizmi. He is a major figure in the history of mathematics.)

This history may not be of immediate interest to every reader, but there is a good point to it. The roots of algebra are ancient and developed in an era very different from our own. Today's student learns algebra in order to facilitate the study and practice of physics, chemistry, statistics, engineering, and other fields. None of these fields existed when algebra was being conceived. That is, the theory was developed before the recognition of the problems and calculations that arise in modern practice. Thus, "in practice, theory and practice are different."

This chapter is about re-expressing some basic algebraic theory in order to align it better to today's practice.

## Linear equations

The focus of interest will be the familiar task

$$\ \ \ \ \ \ \text{given}\ \ a x = b\,,\ \ \text{find}\ \ x\ .$$ All algebra students learn that $x = b/a$, with the proviso that if $a = 0$, "there is no solution."

A somewhat more advanced algebra task is to work with "simultaneous linear equations," for example: $$\ \ \ \text{given}\ \ \ \begin{array}{rrrcr}3x & + &2y & = & 7\\-1&+&y&=&4\end{array} \ \ \ \ \text{find}\ \ x\,\&\,y\ .$$ Solving simultaneous linear equations is hard. It involves more arithmetic than $ax = b$ and requires the student to make good choices how to take linear combinations of the two equations to reduce the problem to two equations, one with $x$ as the only unknown and one with $y$. Also, the "there is no solution" proviso is not easy to state, so you can't know at a glance whether there is indeed a solution.

The simultaneous linear equation problem can be more compactly written using matrix and vector notation. $$\begin{array}{rrrcr}3x & + &2y & = & 7\\-1&+&y&=&4\end{array} \ \ \text{is the same as}\ \ \left[\begin{array}{r}3\\-1\end{array}\right] x + \left[\begin{array}{r}2\\1\end{array}\right] y =
\left[\begin{array}{r}7\\4\end{array}\right] $$ You can see the vector form as a linear combination of two vectors. Collecting these two vectors into a matrix $\mathit{A}$ and $x\, \&\, y$ into a vector $\vec{x}$ gives $$\left[\begin{array}{rr}3&2\\-1&1\end{array}\right]\ \vec{x} = \left[\begin{array}{r}7\\4\end{array}\right]$$ Which can be expressed as $\mathit{A} \vec{x} = \vec{b}$.

A student, recognizing the similarity of $\mathit{A}\vec{x} = \vec{b}$ to $a x = b$ would reasonably suggest the solution $\vec{x} = \vec{b}/ \mathit{A}$. Such a student might be instructed, "No, you can't do this." A better response would be, "Good. Now tell me what you mean by $\vec{b}/\mathit{A}$?"

Modern practice often calls for solving $\mathit{A}\vec{x} = \vec{b}$ in settings where a traditional algebra teacher might say, as for $0 x = b$ that "there is no solution."

To illustrate such a setting, recall the problems from Block 1 of finding the linear combination of the functions $f(\mathtt{time})=1$ and $g(\mathtt{time}) = e^{-0.019 \mathtt{time}}$ that best matches the `CoolingWater` data:
```{r echo=FALSE}
and_so_on(CoolingWater)
```
We seek scalars $C$ and $D$ such that the function $C f(time) + D g(time)$ gives the best possible match to `temp`.

We can compactly write the problem of finding the best linear combination into matrix form by evaluating $f()$ and $g()$ at the values listed in the `time` column:
$$\underbrace{\left[\begin{array}{rr}1&1.0000\\1&0.9812\\1&0.9627\\\vdots\\1&0.0153\\1&0.0150\end{array}\right]}_{\!\!\!\!\!\!\!\!{\large\mathit{A}} = \left[\strut f(\mathtt{time})\,,\ \ \ g(\mathtt{time})\right]} \underbrace{\left[\begin{array}{r}C\\D\end{array}\right]}_{\large\vec{x}} \ \text{is the best match to}\  \underbrace{\left[\begin{array}{r}\mathtt{98.2}\\\mathtt{94.4}\\\mathtt{91.4}\\\vdots\\\mathtt{25.9}\\\mathtt{25.8}\end{array}\right]}_{\large\vec{b}}$$
Regrettably, the classical algebraicists did not propose a rule for "is the best match to." Replacing "is the best match to" with $=$ is not literally correct since "there is no solution" that makes the equality literally true.

We'll use the term ***target problem*** to name the task of finding $\vec{x}$ such that $\mathit{A} \vec{x}$ is the best possible match to $\vec{b}$. This term is motivated by the idea that $\vec{b}$ is a target, and we seek to use the resources in $\mathit{A}$ to get as close as possible to the target: choose $\vec{x}$ such that $\mathit{A} \vec{x}$ falls as closely as possible to the target.

To address the practical problem in the notation of algebra theory, people write $$\mathit{A} \vec{x} = \vec{b} - \vec{r}$$ where $\vec{r}$ is a vector specially selected to path up $\mathit{A} \vec{x} = \vec{b}$ so that when the best-matching $C$ and $D$ are found, there will be a literal equality solution to $\mathit{A} \vec{x} = \vec{b} - \vec{r}$.

At first glance, $\mathit{A} \vec{x} = \vec{b} - \vec{r}$ might seem intractable: How are we to find $\vec{r}$. The answer is that $\vec{r}$ will be the solution to the projection problem $\vec{b}\sim\mathit{A}$. When $\vec{r}$ is selected this way, $\vec{r}$ will be the shortest possible vector that can do the matching up. In other words, by choosing $\vec{r} = \vec{b} \sim \mathit{A}$ we are implementing the following definition of "is the best match to": "the best match is the one with the smallest length $\vec{r}$."

It's remarkable that one can find $\vec{r}$ even without knowing $\vec{x}$. That's why we introduced and solved the ***projection problem*** before taking on the ***target problem***.

The part of the target problem that we have still to figure out is how, given $\vec{r}$, to find $\vec{x}$. But even at this point you can see that $\mathit{A}\vec{x} = \vec{b} - \vec{r}$ must have a solution, since $\vec{b} - \vec{r}$ is exactly the model vector $\vec{s}$ which, as we saw in Chapter \@ref(projection-residual), must lie in $\span{\mathit{A}}$.

## Solving the target problem




