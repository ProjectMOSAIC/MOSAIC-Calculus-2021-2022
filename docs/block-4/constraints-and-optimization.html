<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 29 Constraints and optimization | MOSAIC-Calculus.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.24.1 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 29 Constraints and optimization | MOSAIC-Calculus.knit" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 29 Constraints and optimization | MOSAIC-Calculus.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-driven-functions.html"/>
<link rel="next" href="future-value.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.18/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<span class="math inline">
\(\newcommand{\line}{\text{line}}
\newcommand{\hump}{\text{hump}}
\newcommand{\sigmoid}{\text{sigmoid}}
\newcommand{\recip}{\text{recip}}
\newcommand{\diff}[1]{{\cal D}_#1}
\newcommand{\pnorm}{\text{pnorm}}
\newcommand{\dnorm}{\text{dnorm}}
\newcommand{\CC}[1]{\color{#648fff}{#1}}
\newcommand{\CE}[1]{\color{#785ef0}{#1}}
\newcommand{\CA}[1]{\color{#dc267f}{#1}}
\newcommand{\CB}[1]{\color{#fe6100}{#1}}
\newcommand{\CD}[1]{\color{#ffb000}{#1}}\)
</span>






<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="mosaic-calc-style-copy.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><span style="font-size: 150%;><strong><a href="../index.html">MOSAIC Calculus</a></strong></span></li>
<li><em><a>Calculus for the 21st century</a></em></li>
<li><a>Daniel Kaplan</a></li>
<hr>
<li><a href="../block-1/change.html">Block 1: Functions & quantities</a></li>
<li><a href="../block-2/change-relationships.html">Block 2: Differentiation</a></li>
<li><a href="../block-3/change-accumulation.html">Block 3: Accumulation</a></li>
<li><strong><a href="../block-4/block4-intro.html">Block 4: Manifestations</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="block4-intro-draft.html"><a href="block4-intro-draft.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="27" data-path="operations.html"><a href="operations.html"><i class="fa fa-check"></i><b>27</b> Operations on functions</a>
<ul>
<li class="chapter" data-level="27.1" data-path="operations.html"><a href="operations.html#task-solve"><i class="fa fa-check"></i><b>27.1</b> Task: Solve</a></li>
<li class="chapter" data-level="27.2" data-path="operations.html"><a href="operations.html#task-argmax"><i class="fa fa-check"></i><b>27.2</b> Task: Argmax</a></li>
<li class="chapter" data-level="27.3" data-path="operations.html"><a href="operations.html#task-iterate"><i class="fa fa-check"></i><b>27.3</b> Task: Iterate</a></li>
<li class="chapter" data-level="27.4" data-path="operations.html"><a href="operations.html#software-for-the-tasks"><i class="fa fa-check"></i><b>27.4</b> Software for the tasks</a></li>
<li class="chapter" data-level="27.5" data-path="operations.html"><a href="operations.html#algorithmic-techniques"><i class="fa fa-check"></i><b>27.5</b> Algorithmic techniques</a></li>
<li class="chapter" data-level="27.6" data-path="operations.html"><a href="operations.html#exercises"><i class="fa fa-check"></i><b>27.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="data-driven-functions.html"><a href="data-driven-functions.html"><i class="fa fa-check"></i><b>28</b> Data-driven functions</a>
<ul>
<li class="chapter" data-level="28.1" data-path="data-driven-functions.html"><a href="data-driven-functions.html#generating-smooth-motion"><i class="fa fa-check"></i><b>28.1</b> Generating smooth motion</a></li>
<li class="chapter" data-level="28.2" data-path="data-driven-functions.html"><a href="data-driven-functions.html#piecewise-but-smooth"><i class="fa fa-check"></i><b>28.2</b> Piecewise but smooth</a></li>
<li class="chapter" data-level="28.3" data-path="data-driven-functions.html"><a href="data-driven-functions.html#cubic-splines"><i class="fa fa-check"></i><b>28.3</b> C<sup>2</sup> smooth functions</a></li>
<li class="chapter" data-level="28.4" data-path="data-driven-functions.html"><a href="data-driven-functions.html#bézier-splines"><i class="fa fa-check"></i><b>28.4</b> Bézier splines</a></li>
<li class="chapter" data-level="28.5" data-path="data-driven-functions.html"><a href="data-driven-functions.html#exercises-1"><i class="fa fa-check"></i><b>28.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html"><i class="fa fa-check"></i><b>29</b> Constraints and optimization</a>
<ul>
<li class="chapter" data-level="29.1" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#optimization-or-design"><i class="fa fa-check"></i><b>29.1</b> Optimization or design?</a></li>
<li class="chapter" data-level="29.2" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#constraints-graphically"><i class="fa fa-check"></i><b>29.2</b> Constraints graphically</a></li>
<li class="chapter" data-level="29.3" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#multiple-constraints"><i class="fa fa-check"></i><b>29.3</b> Multiple constraints</a></li>
<li class="chapter" data-level="29.4" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#changing-constraints"><i class="fa fa-check"></i><b>29.4</b> Changing constraints</a></li>
<li class="chapter" data-level="29.5" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#incommensurate-objectives"><i class="fa fa-check"></i><b>29.5</b> Incommensurate objectives</a></li>
<li class="chapter" data-level="29.6" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#multiple-objectives"><i class="fa fa-check"></i><b>29.6</b> Multiple objectives</a></li>
<li class="chapter" data-level="29.7" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#multi-objective-decision-making"><i class="fa fa-check"></i><b>29.7</b> Multi-objective decision making</a></li>
<li class="chapter" data-level="29.8" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#commensurate-and-incommensurate"><i class="fa fa-check"></i><b>29.8</b> Commensurate and incommensurate</a></li>
<li class="chapter" data-level="29.9" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#multiple-objectives-1"><i class="fa fa-check"></i><b>29.9</b> Multiple objectives</a></li>
<li class="chapter" data-level="29.10" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#yours-and-mine"><i class="fa fa-check"></i><b>29.10</b> Yours and mine</a></li>
<li class="chapter" data-level="29.11" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#follow-the-gradient"><i class="fa fa-check"></i><b>29.11</b> Follow the gradient!</a>
<ul>
<li class="chapter" data-level="29.11.1" data-path="constraints-and-optimization.html"><a href="constraints-and-optimization.html#more-about-qalys-exercise"><i class="fa fa-check"></i><b>29.11.1</b> More about QALY’s: Exercise??</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="30" data-path="future-value.html"><a href="future-value.html"><i class="fa fa-check"></i><b>30</b> Future value</a></li>
<li class="chapter" data-level="31" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>31</b> Probability</a>
<ul>
<li class="chapter" data-level="31.1" data-path="probability.html"><a href="probability.html#uncertainty-and-risk"><i class="fa fa-check"></i><b>31.1</b> Uncertainty and risk</a></li>
<li class="chapter" data-level="31.2" data-path="probability.html"><a href="probability.html#quantifying-uncertainty"><i class="fa fa-check"></i><b>31.2</b> Quantifying uncertainty</a></li>
<li class="chapter" data-level="31.3" data-path="probability.html"><a href="probability.html#probability-density"><i class="fa fa-check"></i><b>31.3</b> Probability density</a></li>
<li class="chapter" data-level="31.4" data-path="probability.html"><a href="probability.html#the-cumulative-distribution"><i class="fa fa-check"></i><b>31.4</b> The cumulative distribution</a></li>
<li class="chapter" data-level="31.5" data-path="probability.html"><a href="probability.html#uniform-gaussian-exponential"><i class="fa fa-check"></i><b>31.5</b> Uniform, gaussian, exponential</a></li>
<li class="chapter" data-level="31.6" data-path="probability.html"><a href="probability.html#the-expectation-value"><i class="fa fa-check"></i><b>31.6</b> The expectation value</a></li>
<li class="chapter" data-level="31.7" data-path="probability.html"><a href="probability.html#gaussian-and-sigmoid"><i class="fa fa-check"></i><b>31.7</b> Gaussian and sigmoid</a></li>
<li class="chapter" data-level="31.8" data-path="probability.html"><a href="probability.html#the-variance"><i class="fa fa-check"></i><b>31.8</b> The variance</a></li>
<li class="chapter" data-level="31.9" data-path="probability.html"><a href="probability.html#earthquake-preparedness"><i class="fa fa-check"></i><b>31.9</b> Earthquake preparedness</a></li>
<li class="chapter" data-level="31.10" data-path="probability.html"><a href="probability.html#likelihood-and-expectation-maximization"><i class="fa fa-check"></i><b>31.10</b> Likelihood and Expectation Maximization</a></li>
</ul></li>
<li class="chapter" data-level="32" data-path="expectation.html"><a href="expectation.html"><i class="fa fa-check"></i><b>32</b> Expectation</a>
<ul>
<li class="chapter" data-level="32.1" data-path="expectation.html"><a href="expectation.html#expected-social-security"><i class="fa fa-check"></i><b>32.1</b> Expected Social Security</a></li>
<li class="chapter" data-level="32.2" data-path="expectation.html"><a href="expectation.html#life-expectancy"><i class="fa fa-check"></i><b>32.2</b> Life expectancy</a></li>
<li class="chapter" data-level="32.3" data-path="expectation.html"><a href="expectation.html#misunderstanding-life-expectancy"><i class="fa fa-check"></i><b>32.3</b> Misunderstanding life expectancy</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="mechanics.html"><a href="mechanics.html"><i class="fa fa-check"></i><b>33</b> Mechanics</a>
<ul>
<li class="chapter" data-level="33.1" data-path="mechanics.html"><a href="mechanics.html#work"><i class="fa fa-check"></i><b>33.1</b> Work</a></li>
<li class="chapter" data-level="33.2" data-path="mechanics.html"><a href="mechanics.html#energy"><i class="fa fa-check"></i><b>33.2</b> Energy</a></li>
<li class="chapter" data-level="33.3" data-path="mechanics.html"><a href="mechanics.html#momentum"><i class="fa fa-check"></i><b>33.3</b> Momentum</a></li>
<li class="chapter" data-level="33.4" data-path="mechanics.html"><a href="mechanics.html#center-of-mass"><i class="fa fa-check"></i><b>33.4</b> Center of mass</a></li>
<li class="chapter" data-level="33.5" data-path="mechanics.html"><a href="mechanics.html#angular-momentum-and-torque"><i class="fa fa-check"></i><b>33.5</b> Angular momentum and torque</a></li>
<li class="chapter" data-level="33.6" data-path="mechanics.html"><a href="mechanics.html#exercises-2"><i class="fa fa-check"></i><b>33.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="random-walks.html"><a href="random-walks.html"><i class="fa fa-check"></i><b>34</b> Random walks</a>
<ul>
<li class="chapter" data-level="34.1" data-path="random-walks.html"><a href="random-walks.html#material-to-add"><i class="fa fa-check"></i><b>34.1</b> Material to add</a></li>
<li class="chapter" data-level="34.2" data-path="random-walks.html"><a href="random-walks.html#objectives"><i class="fa fa-check"></i><b>34.2</b> Objectives</a></li>
<li class="chapter" data-level="34.3" data-path="random-walks.html"><a href="random-walks.html#the-gaussian"><i class="fa fa-check"></i><b>34.3</b> The gaussian</a></li>
<li class="chapter" data-level="34.4" data-path="random-walks.html"><a href="random-walks.html#flux"><i class="fa fa-check"></i><b>34.4</b> Flux</a></li>
<li class="chapter" data-level="34.5" data-path="random-walks.html"><a href="random-walks.html#diffusion"><i class="fa fa-check"></i><b>34.5</b> Diffusion</a></li>
<li class="chapter" data-level="34.6" data-path="random-walks.html"><a href="random-walks.html#variance-dynamics"><i class="fa fa-check"></i><b>34.6</b> Variance dynamics</a></li>
<li class="chapter" data-level="34.7" data-path="random-walks.html"><a href="random-walks.html#random-walk"><i class="fa fa-check"></i><b>34.7</b> Random walk</a></li>
<li class="chapter" data-level="34.8" data-path="random-walks.html"><a href="random-walks.html#mean-square"><i class="fa fa-check"></i><b>34.8</b> Mean square</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="../block-5/vectors.html">Block 5: Linear combinations</a></li>
<li><a href="../block-6/dynamics.html">Block 6: Dynamics</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="constraints-and-optimization" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 29</span> Constraints and optimization</h1>
<div class="underconstruction">
<p><strong>Under Construction</strong></p>
<p>Content subject to revision.</p>
</div>
<p>Objectives</p>
<ul>
<li>Understand how to formula an optimization problem in terms of an objective function and (possibly) constraints.</li>
<li>Be able to solve constrained optimization problems with two input variables and potentially several constraints.</li>
<li>Be able to calculate the “shadow price” of a constraint.</li>
<li>Understand the role played by the gradient of the objective function in solving optimization problems.</li>
<li>Be able to translate constrained optimization problems into comparing gradients of the objective and constraint functions.</li>
</ul>
<div id="optimization-or-design" class="section level2" number="3.1">
<h2><span class="header-section-number">29.1</span> Optimization or design?</h2>
<p>There is a calculus problem that has been part of the standard curriculum since Newton’s first work. It appears in Section III of the very first calculus textbook, published in 1696. (English: “Use of the calculus of differences to find the biggest and smallest values, or the reduction of questions <em>De maximis &amp; minimis.</em>” )</p>
<p><img src="www/lHopital-cover-page.png" width="48%" style="display: block; margin: auto;" /><img src="www/lHopital-optimization.png" width="48%" style="display: block; margin: auto;" /></p>
<p><em><a href="https://archive.org/details/analysedesinfini00lhos/page/56/mode/2up">Source</a>. This is the 1763 edition and is the personal copy of Founding Father and 2nd US President, John Adams.</em></p>
<p>The calculus perspective on <em>optimization</em> involves functions whose output is a scalar quantity: a single number. The problem of maximization is to find the input(s) to the function that produce the largest possible output from the function and similarly for minimization: that is, to find the argmax or argmin.</p>
<p>An analogous problem, suited for an elementary-school pupil, is to take a deck of cards, each with a number written on it, and find the card that has the largest number on it. In calculus, we substitute for the discrete domain of the deck of individual cards the continuous domain of the number line (or higher dimensional vector space).</p>
<p>With such a long textbook history, there is a large variety of textbook problems written to illustrate the application of optimization to “real-world” situations. For instance, a famous problem is to find the shape of a tin can (mathematically, a cylinder) that contains a given volume using the least amount of metal (mathematically, the smallest surface area).</p>
<p>It’s important to distinguish between the two distantly related problems of <em>optimization</em> and of <em>design</em>. Optimization is about finding the single best scalar output of a function. Design is about finding a configuration that suits the needs of a situation. Generally, design involves evaluating trade-offs among multiple objectives. In optimization, there is only a single objective.</p>
<p>Optimization is a far easier problem than design, but design is a far more widely applicable process. Regrettably, generations of students, having been given only the optimization hammer as a tool have been induced to treat design as a nail. The simple concept of “best” applies well to comparing scalar outputs of a function, but when the output is a vector or another function, one can only meaningfully speak of “best for a specific purpose.”</p>
<p>There are several strategies for transforming design problems into optimization problems, but inevitably something is lost in the process. One process is to consider only one dimension of the output. For example, in selecting the “best” electric car, you might reasonably look at the car’s range. But other criteria are important too, for instance the speed with which the batteries can be recharged or the cost of the vehicle. Throughout your professional life, you will likely encounter situations where the criteria for making a design decision have been reduced unnecessarily to low dimension. For instance, in the history of bomber design the criteria “bigger, higher, faster, farther” have been emphasized (example: B-1 bomber). Taking into consideration other criteria can considerably change the design, as with “stealth” (the B-2 bomber) or suitability to mission (the A-10 for close air support).</p>
<p>There are some situations, however, where there is a strong logical or economic basis for converting a vector/function output into a scalar. This day’s lesson is about two of those methods, one related particularly to finance and the other to outcomes that are uncertain. (Later on, we’ll examine mathematical techniques for dealing with genuine design-related problems.)</p>
<p>EXAMPLE FROM CHAPTER 25</p>
<p>Previously, in Section <a href="#partial-thinking"><strong>??</strong></a>, we constructed a model of the effectiveness and tutoring on exam performance.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="constraints-and-optimization.html#cb16-1" aria-hidden="true" tabindex="-1"></a>P <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(<span class="fl">0.5</span><span class="sc">*</span>S <span class="sc">+</span> <span class="fl">0.5</span><span class="sc">*</span>T <span class="sc">+</span> <span class="fl">0.5</span><span class="sc">*</span>S<span class="sc">*</span>T <span class="sc">-</span> <span class="fl">0.5</span><span class="sc">*</span>S<span class="sc">^</span><span class="dv">2</span> <span class="sc">~</span> S <span class="sc">&amp;</span> T)</span>
<span id="cb16-2"><a href="constraints-and-optimization.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(<span class="fu">P</span>(S, T) <span class="sc">~</span> S <span class="sc">&amp;</span> T, <span class="fu">domain</span>(<span class="at">S=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">T=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:zero-one"></span>
<img src="MOSAIC-Calculus_files/figure-html/zero-one-1.png" alt="The model constructed in Chapter 25 for exam performance $P$ as a function of studying $S$ and tutoring $T$." width="90%" />
<p class="caption">
Figure 29.1: The model constructed in Chapter 25 for exam performance <span class="math inline">\(P\)</span> as a function of studying <span class="math inline">\(S\)</span> and tutoring <span class="math inline">\(T\)</span>.
</p>
</div>
<p>There are only so many hours in the day. There’s a constraint on the amount of time you have to study and to be tutored. A very basic model of this constraint is <span class="math inline">\(S + T = 1\)</span>. Since there are no units attached to <span class="math inline">\(S\)</span> and <span class="math inline">\(T\)</span> in the graph, we can’t be sure that the slope of the constraint is really <span class="math inline">\(-1\)</span>, but we know it will be negative. What are the implications of this constraint in terms of optimal choices for <span class="math inline">\(S\)</span> and <span class="math inline">\(T\)</span>. [That you do some of each, not all of one and none of the other.]</p>
<ul>
<li>Given an algebraically simple constraint in the problem formulation, be able to use that constraint to reduce the dimension of an optimization problem. (Later we’ll use constraints in a different way when finding argmaxes and argmins.)</li>
</ul>
<p>Consider these easy optimization problems:</p>
<ul>
<li>Build a road costing $10M per mile. How long should it be to minimize costs.
<ul>
<li>Answer: Zero miles</li>
</ul></li>
<li>Choose the length of the front wall and side walls of a room to maximize the room area.
<ul>
<li>Answer: Make the walls infinitely long.</li>
</ul></li>
<li>Build a spherical tank sliced in a way to have a flat bottom. The goal is to choose how far away from the sphere’s center to make the slice in order to maximize the volume.
<ul>
<li>Answer: Don’t make any slice; it reduces the volume!</li>
</ul></li>
<li>Provide funding to a portfolio of public health interventions in order to maximize the number of lives saved.
<ul>
<li>Answer: Spend an infinite amount on each intervention.</li>
</ul></li>
</ul>
<p>Each of these problems has an objective function—cost, room area, volume, lives saved. Each also has inputs to that objective function—road length, front and side wall lengths, slice position, funding for the different interventions. <span style="float: right; padding-left: 50px;"><a name="4800" href="#4800"><img src="www/icons8-signpost.png" title="Location: 4800" width="12px"/></a><span style="color: red; font-size: 6pt;">4800</red></span></p>
<p>In your career, you may occasionally encounter optimization problems like this, where the answer is obvious. All of them fall into the category of “more is better” (or “less is better”).</p>
<p>Nontrivial decisions generally involve resolving trade-offs: more is better <strong>up to a point</strong> and then it’s worse. Or, “more <span class="math inline">\(x\)</span> is better” except that bigger <span class="math inline">\(x\)</span> means smaller <span class="math inline">\(y\)</span> and smaller <span class="math inline">\(y\)</span> makes things worse. <span style="float: right; padding-left: 50px;"><a name="4805" href="#4805"><img src="www/icons8-signpost.png" title="Location: 4805" width="12px"/></a><span style="color: red; font-size: 6pt;">4805</red></span></p>
<p>An example of a “bigger <span class="math inline">\(x\)</span> means smaller <span class="math inline">\(y\)</span>” is the cardboard box problem often found in calculus textbooks. You’re given a rectangular piece of cardboard as in the diagram. From the rectangle, you will cut out four squares in the corners (marked in yellow). This creates a central rectangle with four flaps. When we fold these up we get an open-topped box. <span style="float: right; padding-left: 50px;"><a name="4810" href="#4810"><img src="www/icons8-signpost.png" title="Location: 4810" width="12px"/></a><span style="color: red; font-size: 6pt;">4810</red></span></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-26"></span>
<img src="www/folded-box.png" alt="Creating a box by cutting corners out of a rectangle. (Image from [Khan Academy video](https://www.khanacademy.org/math/ap-calculus-ab/ab-diff-analytical-applications-new/ab-5-11/v/optimizing-box-volume-graphically)) Length units are inches." width="90%" />
<p class="caption">
Figure 29.2: Creating a box by cutting corners out of a rectangle. (Image from <a href="https://www.khanacademy.org/math/ap-calculus-ab/ab-diff-analytical-applications-new/ab-5-11/v/optimizing-box-volume-graphically">Khan Academy video</a>) Length units are inches.
</p>
</div>
<p>The problem is to choose <span class="math inline">\(x\)</span> to maximize the volume of the box. By making <span class="math inline">\(x\)</span> large, we increase the height of the box. A taller box is a more voluminous box … at least if all other things are equal. But by making the box taller, we also make the bottom smaller because we still have the same amount of cardboard. <span style="float: right; padding-left: 50px;"><a name="4815" href="#4815"><img src="www/icons8-signpost.png" title="Location: 4815" width="12px"/></a><span style="color: red; font-size: 6pt;">4815</red></span></p>
<p>The volume of the box will be height x length x width, or
<span class="math display">\[V = x (30-x) (20-x)\]</span></p>
<p><strong>Question A</strong> What is the value of <span class="math inline">\(x\)</span> and the corresponding <span class="math inline">\(V(x)\)</span> that produces the maximum volume for the box? You can use the sandbox for your calculations (make sure your parentheses match the provided equation).</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\(x = 7.8 \text{in}, V = 2112.55 \text{in}^3\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(x = 7.85 \text{in}, V = 2112.61 \text{in}^3\)</span><span class="mcanswer">Nice! </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(x = 7.90 \text{in}, V = 2112.73 \text{in}^3\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(x = 7.95 \text{in}, V = 2112.59 \text{in}^3\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>A somewhat richer problem is to find the edge length <span class="math inline">\(y\)</span> square of cardboard that will produce the maximum volume when square corners of edge length <span class="math inline">\(x\)</span> are cut out. Here, the volume is <span class="math inline">\(V = x(y-2x)(y-2x)\)</span>. <span style="float: right; padding-left: 50px;"><a name="4820" href="#4820"><img src="www/icons8-signpost.png" title="Location: 4820" width="12px"/></a><span style="color: red; font-size: 6pt;">4820</red></span></p>
<p>As stated, maximum <span class="math inline">\(V\)</span> is infinite. There’s no trade-off between <span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span>, and <span class="math inline">\(z\)</span>. If a problem is to have a finite argmax, we need to introduce a trade-off. Let’s suppose the trade-off is that the area of the initial piece of cardboard should be 600 square-inches, as in the previous problem. Now we have an objective function and a constraint <span class="math display">\[\text{find argmax}\ \ V(x,y) = (y-2x)^2 x\  \text{subject to the constraint}\  y^2 = 600\ \text{in}^2\]</span> <span style="float: right; padding-left: 50px;"><a name="4825" href="#4825"><img src="www/icons8-signpost.png" title="Location: 4825" width="12px"/></a><span style="color: red; font-size: 6pt;">4825</red></span></p>
<p>One perfectly legitimate way to solve this problem is to use the constraint to find a value for <span class="math inline">\(y\)</span>, then substitute this value into the objective function, giving <span class="math display">\[V(x) = (\sqrt{600} - 2x)^2 x\]</span></p>
<p><strong>Question B</strong> Use the sandbox to find the optimal value of <span class="math inline">\(x\)</span> in the square-bottomed box problem. Which of these is it?</p>
<p>    <span class="Zchoice"><span class="math inline">\(x=4.083\)</span><span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice"><span class="math inline">\(x=4.186\)</span><span class="mcanswer">︎✘ </span></span>       <span class="Zchoice"><span class="math inline">\(x=4.189\)</span><span class="mcanswer">︎✘ </span></span>       <span class="Zchoice"><span class="math inline">\(x=4.210\)</span><span class="mcanswer">︎✘ </span></span></p>
<p>We’re now going to see a different way of using the constraint in the optimization problem. The idea is to graph the objective function without any constraint, then graph the constraint on top. The sandbox has the appropriate graphing commands for the square-bottomed box. <span style="float: right; padding-left: 50px;"><a name="4830" href="#4830"><img src="www/icons8-signpost.png" title="Location: 4830" width="12px"/></a><span style="color: red; font-size: 6pt;">4830</red></span></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="constraints-and-optimization.html#cb17-1" aria-hidden="true" tabindex="-1"></a>V <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(x<span class="sc">*</span>(y <span class="sc">-</span> <span class="dv">2</span><span class="sc">*</span>x)<span class="sc">^</span><span class="dv">2</span> <span class="sc">~</span> x)</span>
<span id="cb17-2"><a href="constraints-and-optimization.html#cb17-2" aria-hidden="true" tabindex="-1"></a>constraint <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(y<span class="sc">^</span><span class="dv">2</span> <span class="sc">~</span> x <span class="sc">+</span> y)</span>
<span id="cb17-3"><a href="constraints-and-optimization.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(<span class="fu">V</span>(x, y) <span class="sc">~</span> x <span class="sc">+</span> y, <span class="fu">domain</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>), <span class="at">y=</span><span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">30</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="constraints-and-optimization.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_labs</span>(<span class="at">title=</span><span class="st">&quot;Volume&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="constraints-and-optimization.html#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contour_plot</span>(<span class="fu">constraint</span>(x, y) <span class="sc">~</span> x <span class="sc">+</span> y,</span>
<span id="cb17-6"><a href="constraints-and-optimization.html#cb17-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">filled=</span><span class="cn">FALSE</span>, <span class="at">contour_color =</span> <span class="st">&quot;orange3&quot;</span>,</span>
<span id="cb17-7"><a href="constraints-and-optimization.html#cb17-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">contours_at =</span> <span class="dv">600</span>)</span></code></pre></div>
<p><img src="MOSAIC-Calculus_files/figure-html/cf2-2-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Here, the constraint is like a straight road going up and over the flank of a hill. To find the argmax “subject to the constraint,” imagine you are riding a bike along the red road. If you start on the left side of the graphic frame and go to the right you will be going uphill. As you approach the crest, the road will level out and then you’ll be riding downhill. <span style="float: right; padding-left: 50px;"><a name="4835" href="#4835"><img src="www/icons8-signpost.png" title="Location: 4835" width="12px"/></a><span style="color: red; font-size: 6pt;">4835</red></span></p>
<p><strong>Question C</strong> What is the relationship between the constraint (road) and the objective function (contours) that indicates you are on the crest?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">The road intersects a contour at right angles.<span class="mcanswer">︎✘ If so, you would be riding in the steepest direction. Remember, the gradient at each point is perpendicular to the contour at that point.</span></span><br />
</li>
<li><span class="Zchoice">There’s no fixed relationship between the road and the steepness of the objective function.<span class="mcanswer">︎✘ Yet, ask any bicyclist and they can easily tell you when they have reached the top point on a road.</span></span><br />
</li>
<li><span class="Zchoice">At the crest, the road is parallel to the nearest contour.<span class="mcanswer">︎✘ Almost, but remember that we draw only some of the contours and not others simply to prevent flooding the graph with ink.</span></span><br />
</li>
<li><span class="Zchoice">At the crest, the road is parallel to the contour passing through that point on the road.<span class="mcanswer">Excellent! </span></span></li>
</ol>
<p><strong>Question D</strong> At the optimal point on the road, what is the value of the objective function <span class="math inline">\(V(x,y)\)</span>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">1000<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">1100<span class="mcanswer">Right! Right. The point is about half-way between the 1000 and 1200 contours.</span></span><br />
</li>
<li><span class="Zchoice">1200<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">1400<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>Now you have see two completely equivalent approaches to using the constraint</p>
<ol style="list-style-type: decimal">
<li>Solve the constraint for one variable in terms of the others.</li>
<li>Use the constraint to restrict the domain of optimization to those values that satisfy the constraint. (We did this graphically, but it can be done other ways if a graph can’t be made, for instance, if there are more than two inputs to the objective function.) <span style="float: right; padding-left: 50px;"><a name="4840" href="#4840"><img src="www/icons8-signpost.png" title="Location: 4840" width="12px"/></a><span style="color: red; font-size: 6pt;">4840</red></span></li>
</ol>
<p>One reason to introduce (2) is to help you develop an intuition about the relationship between a constraint and the objective function. But it turns out that (2) lets us add features to optimization problems that can be important in practice. These are <span style="float: right; padding-left: 50px;"><a name="4845" href="#4845"><img src="www/icons8-signpost.png" title="Location: 4845" width="12px"/></a><span style="color: red; font-size: 6pt;">4845</red></span></p>
<ol style="list-style-type: lower-alpha">
<li><p>Add additional constraints to the problem.</p>
<p>For example, in the cardboard box problem we didn’t mention two constraints that are so obvious that we left it to common sense: <span class="math inline">\(x &gt; 0\)</span> and <span class="math inline">\(y &gt; 0\)</span>. You can’t have negative cardboard.</p></li>
<li><p>Examine what happens if the constraint is changed in some way.</p>
<p>Suppose you were trying to convince the cardboard providers to allow a bit more cardboard for the box. How would the output of the objective function respond to this change?</p>
<p>Often, the effect of changing a constraint is described in terms of a ratio: the change in output of the objective function divided by the change in the constraint value. This is sometimes called a <strong>shadow price</strong> of the constraint. The synonym <strong>Lagrange multiplier</strong> is also widely used. <span style="float: right; padding-left: 50px;"><a name="4850" href="#4850"><img src="www/icons8-signpost.png" title="Location: 4850" width="12px"/></a><span style="color: red; font-size: 6pt;">4850</red></span></p></li>
</ol>
<p>The next two sections will deal with (a) and (b) in turn.</p>
<details>
<summary>
<strong>Exercise XX.XX</strong>: <span><a name="File: Exercises/snake-walk-knife.Rmd" href="#VHn3UG"><img src="www/icons8-signpost.png" title="Location: Exercises/snake-walk-knife.Rmd" width="12px"/></a><span style="color: red; font-size: 9pt;">VHn3UG</red></span>
</summary>
<p>Based on an extensive but fictive observation of activity and grades of college students, the model shown in the figure was constructed to give GPA as a function of the number of hours each weekday (Monday-Friday) spent studying and spent in social activity and play. (Activity during the weekend was not monitored.)</p>
<p><img src="MOSAIC-Calculus_files/figure-html/f-graph2-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Several points in the graphic frame have been marked with red letters. Refer to these letters when answering the following questions.</p>
<p><strong>Question A</strong> According to the model, what’s the optimal combination of Study and Play to achieve a high GPA?</p>
<p>    <span class="Zchoice">F<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">G<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">H<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">I<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question B</strong> Which of these letters marks a place on the graph where the partial derivative of GPA with respect to Play is positive?</p>
<p>    <span class="Zchoice">B<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">C<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">K<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">L<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question C</strong> Which if these ketters marks a place on the graph where the partial derivative of GPA with respect to Play is negative.</p>
<p>    <span class="Zchoice">A<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">F<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">H<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">K<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question D</strong> Where is the partial derivative with respect to Study is negative?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">Nowhere. <span class="math inline">\(\partial_{study} GPA()\)</span> is always positive. More study = better grades.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">E<span class="mcanswer">Excellent! </span></span><br />
</li>
<li><span class="Zchoice">F<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">L<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question E</strong> Study and Play are not the only activities possible. Sleep is important, too, as are meals, personal care, etc. In the study, students were observed who spent up to 22 hours per day in Study or Play. Presumably, such students crashed on the weekend.</p>
<p>Suppose you decide to budget 12 hours each weekday day in activities other than Study and Play. Which letter labels the constrained optimal mix (argmax) of Study and Play.</p>
<p>    <span class="Zchoice">I<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">J<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">K<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">L<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question F</strong> What is the “shadow price” of GPA with respect to the budget for a budget constraint of 12 hours? Give both an estimated numerical value as well as units.</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">-0.8 hour/gradepoints<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">0.3 gradepoints/hour<span class="mcanswer">Correct. </span></span><br />
</li>
<li><span class="Zchoice">+0.9 gradepoints/hour<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">+1.3 hour/gradepoints<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question G</strong> Consider a student who budgets 22 hours per day for Study and Play. Which letter is closest to the constrained argmax with a 22-hour constraint?</p>
<p>    <span class="Zchoice">A<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">B<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">C<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">D<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question H</strong> What is the “shadow price” of GPA with respect to the budget constraint of 22 hours? Give the estimated numerical value.</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">-0.5 gradepoints/hour<span class="mcanswer">Correct. </span></span><br />
</li>
<li><span class="Zchoice">0 gradepoints/hour<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">+0.5 gradepoints/hour<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">+1.0 gradepoints/hour<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question I</strong> Based on the shadow price from the previous question, which of these is the best advice to give the student (who seeks to maximize GPA)?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">You’re hopeless. There aren’t enough hours in the day for you to get a good GPA.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">You’ve got to squeeze out more effort studying. Give it your all!<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Play more, study less!<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Study less<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Study less, play less. Sleep!<span class="mcanswer">Nice! </span></span></li>
</ol>
</details>
<details>
<summary>
<strong>Exercise XX.XX</strong>: <span><a name="File: Exercises/duck-tell-laundry.Rmd" href="#Yb6tVr"><img src="www/icons8-signpost.png" title="Location: Exercises/duck-tell-laundry.Rmd" width="12px"/></a><span style="color: red; font-size: 9pt;">Yb6tVr</red></span>
</summary>
<p>We’d like to make a folded cardboard box in the most efficient way possible. As you know, cardboard boxes have four sides as well as eight flaps, four for the top and four for the bottom. The flaps are arranged to provide <em>double coverage</em>; you fold the flaps from one direction and then fold over them the flaps from the other direction.</p>
<p><img src="www/folding-box.png" width="60%" style="display: block; margin: auto;" /></p>
<p>The diagram depicts the box sides and flaps laid out on a flat piece of cardboard. The flaps are shaded with diagonal lines.</p>
<p>Suppose the height, width, and depth of the box are <span class="math inline">\(h\)</span>, <span class="math inline">\(w\)</span>, and <span class="math inline">\(d\)</span> respectively. The box volume is easy:</p>
<p><span class="math display">\[V = h w d\]</span>
The area of cardboard consists of the the four sides and the eight flaps. Each component’s area is a product of the two edge lengths. For example, the box sides are either <span class="math inline">\(w h\)</span> or <span class="math inline">\(d h\)</span>. The flaps, each of which extends half-way across the bottom or top have areas <span class="math inline">\(w d/2\)</span>.</p>
<p><strong>Question A</strong> Which of these formulas gives the area of the cardboard making up the box?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\(2 h(w + d) + 4 w d\)</span><span class="mcanswer">Good. </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(4 h(w + d) + 2 w d\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(2 h(w + d) + 8 w d\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(4 h(w + d) + 4 w d\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>A common size for a box is 1.3 cubic feet. We’ll use feet as the units for <span class="math inline">\(w\)</span>, <span class="math inline">\(h\)</span>, and <span class="math inline">\(d\)</span>.</p>
<p><strong>Question B</strong> The following formulas <strong>do not</strong> describe the area of the cardboard, but they are nonetheless formulas for something. Except one of them, which cannot be true. Which one?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\(h(w + d)/d + w d^2/h\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(h(w + d) + w h d\)</span><span class="mcanswer">Right! This formula is not dimensionally consistent</span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(h(w + d) + w^2 h/d\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(h(w^2/d + d) + d^2\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>As <span class="math inline">\(w\)</span>, <span class="math inline">\(h\)</span>, or <span class="math inline">\(d\)</span> are changed, the volume and surface area of the box are changed. Asking for the <span class="math inline">\(w\)</span>, <span class="math inline">\(h\)</span>, and <span class="math inline">\(d\)</span> that minimize the surface area of the box is <strong>not</strong> a complete statement of a problem. The minimum surface area will be zero whenever two of the three dimensions have length zero. In other words, we can minimize the surface area by making a box that is no box at all!</p>
<p>To complete the problem statement we need something else. Here, that something is a <strong>constraint</strong>: We demand that the box have a volume of <span class="math inline">\(V = 1.3\)</span> cubic feet.</p>
<p>Often, a constraint plays the role of a <em>dimension reduction</em>. With <span class="math inline">\(w\)</span>, <span class="math inline">\(h\)</span>, and <span class="math inline">\(d\)</span>, we have a 3-input optimization problem. But we can use the constraint equation to solve for one of the variables as a function of the other variables and the (known) volume. For instance, we can find <span class="math inline">\(h\)</span> as
<span class="math display">\[h = V/d w\]</span></p>
<p><strong>Question C</strong> Plug in the above expression for <span class="math inline">\(h\)</span> into the formula for the surface area of cardboard. Which of the following is the resulting formula in terms of <span class="math inline">\(w\)</span>, <span class="math inline">\(d\)</span>, and <span class="math inline">\(V\)</span>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\(2 V(w + d)/wd + 4 w d\)</span><span class="mcanswer">Correct. </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(V(w + d)/w + V(w+d)/d + 4 w d\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(2 w d (w + d)/V + 4 w d\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(2 (w + d)/wd + 4 V w d\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>The following sandbox contains the formula for the surface area <span class="math inline">\(A(w, d, V)\)</span> of a box of volume <span class="math inline">\(V\)</span>. The graphics command draw a contour plot of <span class="math inline">\(A()\)</span> as a function of <span class="math inline">\(w\)</span> and <span class="math inline">\(d\)</span>, holding <span class="math inline">\(V = 1.3\)</span> cubic feet.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="constraints-and-optimization.html#cb18-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(<span class="dv">2</span><span class="sc">*</span>V<span class="sc">*</span>(w<span class="sc">+</span>d)<span class="sc">/</span>(w<span class="sc">*</span>d) <span class="sc">+</span> <span class="dv">4</span><span class="sc">*</span>w<span class="sc">*</span>d <span class="sc">~</span> w <span class="sc">+</span> d, <span class="at">V =</span> <span class="fl">1.3</span>)</span>
<span id="cb18-2"><a href="constraints-and-optimization.html#cb18-2" aria-hidden="true" tabindex="-1"></a>dom <span class="ot">&lt;-</span> <span class="fu">domain</span>(<span class="at">w =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">1.5</span>), <span class="at">d=</span><span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">1.5</span>))</span>
<span id="cb18-3"><a href="constraints-and-optimization.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(<span class="fu">A</span>(w, d) <span class="sc">~</span> w <span class="sc">+</span> d, dom,</span>
<span id="cb18-4"><a href="constraints-and-optimization.html#cb18-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">contours_at =</span> <span class="cn">NULL</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="constraints-and-optimization.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_refine</span>(<span class="fu">coord_fixed</span>()) <span class="co"># pipe to</span></span>
<span id="cb18-6"><a href="constraints-and-optimization.html#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># gradient_plot( A(w, d) ~ w + d, dom)</span></span></code></pre></div>
<p>When you draw the contour plot, you’ll see a broad area near the center inside the contour at area = 9.5. Towards the upper-right and lower-left corners of the plot frame are contours at higher levels of area.</p>
<p><strong>Question D</strong> The spacing between the contours in the corners is tight, but there is no similarly spaced contour inside the region delimited by the contour at area=9.5. Why not?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">We didn’t ask for contours inside 9.5.<span class="mcanswer">︎✘ We didn’t ask, indeed. And we didn’t ask for any of the other contours specifically, yet they appear in the graph.</span></span><br />
</li>
<li><span class="Zchoice">The function shape inside the 9.5 contour is the top of a bowl, so it is pretty flat.<span class="mcanswer">︎✘ Almost right!</span></span><br />
</li>
<li><span class="Zchoice">The function shape inside the 9.5 contour is the bottom of a bowl, so it is pretty flat.<span class="mcanswer">Right! </span></span><br />
</li>
<li><span class="Zchoice">All the points inside the 9.5 contour are at exactly the same height.<span class="mcanswer">︎✘ The function <span class="math inline">\(C(w,d)\)</span> is infinitely differentiable so it’s not possible to make a sudden shift from a sloped form to one that is dead flat.</span></span></li>
</ol>
<p>Use the below sandbox and place contours at 10, 9.5, 9.4. You can do this by replacing the argument <code>contours_at = NULL</code> with this:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="constraints-and-optimization.html#cb19-1" aria-hidden="true" tabindex="-1"></a>contours_at <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="fl">9.5</span>, <span class="fl">9.4</span>)<span class="er">)</span></span></code></pre></div>
<p>Add more contours to build a fence tighter and tighter around the argmin. When the fenced region is tiny, you can read off the min from the contour label. (Remember, the “argmin” is the value of the inputs <span class="math inline">\(w\)</span> and <span class="math inline">\(d\)</span> at which the function is minimized. The “min” is the value of the function at the argmin.) But watch out as you do this. If you ask for a contour at a level that’s lower than the min, it will simply not be drawn. Or, more precisely, there are no inputs that produce an output that’s lower than the min. So you may have to change the interval between levels (e.g. 10, 9.5, 9.4, …) in order to home in on the argmin.</p>
<p><strong>Question E</strong> The following are values for the output of the function where you might be able to draw a contour. Which one of the values is the smallest for which a contour actually appears?</p>
<p>    <span class="Zchoice">9.1<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">9.05<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">9.01<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">9.005<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">9.0005<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">9<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question F</strong> From your contour plot, read off the values of <span class="math inline">\(w\)</span> and <span class="math inline">\(d\)</span> that produce the minimum surface area for a 1.3 cubic-foot box. What are they? (Hint: You may need to zoom in on the domain to get the precision needed to answer the question.)</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\(w \approx 0.9; d\approx 0.9\)</span><span class="mcanswer">Nice! </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(w \approx 0.9; d\approx 0.6\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(w \approx 0.5; d\approx 0.9\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(w \approx 1.9; d\approx 0.9\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>It’s easy enough for a person to look at a contour plot and roughly locate the argmin. But this is not feasible if there are more than two inputs to the function being optimized. For such functions, another set of numerical techniques are used based on the <strong>gradient</strong> of the objective function. Remember that the gradient at any point is a vector that points in the <strong>uphill</strong> direction and whose <strong>length</strong> is proportional to the steepness of the slope. (Skiers, beware. In skiing what people call the gradient is the steepest <em>downhill</em> direction. This might account for all the mathematicians learning to ski who point their skis uphill in response to the ski instructor’s instruction!)</p>
<p>You can display the gradient on the plot of the area function by piping (remember <code>%&gt;%</code>) the contour plot into the commented-out command in the sandbox. (Also, replace <code>#pipe to</code> with <code>%&gt;%</code>.)</p>
<p><strong>Question G</strong> Since the end of the term is coming, here’s a question that might be a good review for the final. Which of these describes the relationship between the gradient vector and the contours?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">On a contour the gradient vector is perpendicular (“orthogonal”) to the contour.<span class="mcanswer">Excellent! </span></span><br />
</li>
<li><span class="Zchoice">On a contour, the gradient vector has zero length.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">There is no definite relationship; it depends on the function itself.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">On a contour, the gradient vector has a length proportional to the contour level.<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question H</strong> Which of these best describes the gradient vector <strong>at</strong> the argmin?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">The gradient points due North.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The length of the gradient vector is maximal.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The length of the gradient vector is minimal.<span class="mcanswer">︎✘ You can give a better description than this.</span></span><br />
</li>
<li><span class="Zchoice">The length of the gradient vector is zero.<span class="mcanswer">Nice! </span></span></li>
</ol>
<p>Many numerical optimization techniques are based on the idea like this: treating the field of gradient vectors as a <strong>flow field</strong> in a differential equation. Starting at some initial value, follow the gradient vectors (as you did in sketching the trajectory in a flow field). If seeking a <em>maximum</em>, the flow will be in the direction of the gradient. If seeking a <em>minimum</em>, the flow will be opposite the direction of the gradient. It’s not necessary to calculate the gradient everywhere; you just have to calculate it at the present point on your trajectory to know which way to go next.</p>
<p>Occasionally, particularly in textbook problems, the argmin or argmax is found <em>algebraically</em>. This still involves calculating the gradient as a function of the input variables. Then, find the inputs that make all the components of the gradient vector zero.</p>
<p><strong>Question I</strong> Which of these formulas give the gradient vector of <span class="math inline">\(A(w, d)\)</span>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\(\partial_w A = -2 \frac{V}{w^2}+ 4 d, \ \ \partial_d A = -2 \frac{V}{d^2} - 4 w\)</span><span class="mcanswer">Excellent! </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(\partial_w A = -2 \frac{V}{d^2}+ 4 d, \ \ \partial_d A = -2 \frac{V}{w^2} - 4 w\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(\partial_w A = -2 \frac{V}{w^2}+ 4 w, \ \ \partial_d A = -2 \frac{V}{d^2} - 4 d\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(\partial_w A = -2 \frac{V}{d w}+ 4 w, \ \ \partial_d A = -2 \frac{V}{d w} - 4 d\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question J</strong> If the lengths <span class="math inline">\(w\)</span>, <span class="math inline">\(d\)</span>, <span class="math inline">\(h\)</span> are measured in <em>feet</em>, what unit will <span class="math inline">\(\partial_w A\)</span> be in?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">feet<span class="mcanswer">Excellent! Right. The area will be in square feet so the derivative of area with respect to <span class="math inline">\(w\)</span> will be in square feet per foot, that is, feet.</span></span><br />
</li>
<li><span class="Zchoice">square feet<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">cubic feet<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">1/feet<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">dimensionless<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>For those of you who are pining for algebra problems, here you go.</p>
<p>Taking the gradient of <span class="math inline">\(A(w, d)\)</span> (given in a previous question), set both components to zero, giving you two equations in the two variables <span class="math inline">\(w\)</span> and <span class="math inline">\(d\)</span>. There’s also a <span class="math inline">\(V\)</span> in the equations, but we’ve set up the problem saying that we already know <span class="math inline">\(V\)</span>. Numerically, we used <span class="math inline">\(V=1.3\)</span> cubic-feet, but in the algebra solution we can just leave <span class="math inline">\(V\)</span> as a symbol, giving general formulas for <span class="math inline">\(w\)</span> and for <span class="math inline">\(d\)</span> in terms of <span class="math inline">\(V\)</span>.</p>
<p><strong>Question K</strong> Which of these is the correct formula for the optimal <span class="math inline">\(w^\star\)</span> as a function of <span class="math inline">\(V\)</span>? (Hint: You can weed out one of the choices by checking for dimensional consistency.)</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\(w^\star = \frac{\sqrt[3]{V}}{\sqrt[3]{2}}\)</span><span class="mcanswer">Good. </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(w^\star = \frac{\sqrt[3]{V}}{\sqrt[3]{3}}\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(w^\star = \frac{\sqrt[2]{V}}{\sqrt[2]{3}}\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>The solution for <span class="math inline">\(d^\star\)</span> is the same as for <span class="math inline">\(w^\star\)</span>. (An experienced algebraist would have noticed that in the formula for area, you can swap inputs <span class="math inline">\(w\)</span> and <span class="math inline">\(d\)</span> without changing the output.)</p>
<p>Now compute the formula for the optimal value <span class="math inline">\(h^\star\)</span>. (Hint: Early in the section we gave a formula that involves <span class="math inline">\(V\)</span>, <span class="math inline">\(h\)</span>, <span class="math inline">\(w\)</span>, and <span class="math inline">\(d\)</span>.)</p>
<p><strong>Question L</strong> Which of these is the correct formula for the optimal <span class="math inline">\(h^\star\)</span> as a function of <span class="math inline">\(V\)</span>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\(h^\star = 2^{2/3} \sqrt[3]{V}\)</span><span class="mcanswer">Nice! </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(h^\star = 2^{1/3} \sqrt[3]{V}\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(h^\star = 3^{2/3} \sqrt[3]{V}\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(h^\star = 3^{1/3} \sqrt[3]{V}\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>It turns out that <span class="math inline">\(h^\star\)</span> is somewhat larger than either <span class="math inline">\(w^\star\)</span> or <span class="math inline">\(d^\star\)</span>; the optimal box has a square top and bottom, but the sides are not square.</p>
<p><strong>Question M</strong> Which of these is an appropriate explanation for why <span class="math inline">\(h^\star\)</span> is larger than <span class="math inline">\(w^\star\)</span> or <span class="math inline">\(d^\star\)</span>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">People don’t like using boxes that are perfect cubes.<span class="mcanswer">︎✘ Nice joke! But let’s get real now. The objective was to minimize the amount of cardboard, not to make people happy.</span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(h\)</span> multiplies both <span class="math inline">\(w\)</span> and <span class="math inline">\(d\)</span>, but not <em>vice versa</em>, in the formula for surface area.<span class="mcanswer">︎✘ Not true. There are terms <span class="math inline">\(h w\)</span> and <span class="math inline">\(h d\)</span> in the area formula.</span></span><br />
</li>
<li><span class="Zchoice">The flaps need to get longer as <span class="math inline">\(h\)</span> gets longer, so smaller <span class="math inline">\(h\)</span> helps to minimize the amount of cardboard.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The flap-length doesn’t depend on <span class="math inline">\(h\)</span>, only on <span class="math inline">\(w d\)</span>. So we can make <span class="math inline">\(h\)</span> larger without contributing to the “wasted” area of the doubling over of flaps. The flaps get smaller as <span class="math inline">\(wd\)</span> gets smaller, so larger <span class="math inline">\(h\)</span> is preferred.<span class="mcanswer">Nice! </span></span></li>
</ol>
</details>
</div>
<div id="constraints-graphically" class="section level2" number="3.2">
<h2><span class="header-section-number">29.2</span> Constraints graphically</h2>
<div class="todo">
<p>Turn this into an exercise? Where should it go?</p>
</div>
<p><img src="MOSAIC-Calculus_files/figure-html/unnamed-chunk-27-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p><img src="MOSAIC-Calculus_files/figure-html/unnamed-chunk-28-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p><img src="MOSAIC-Calculus_files/figure-html/unnamed-chunk-29-1.png" width="90%" style="display: block; margin: auto;" /></p>
</div>
<div id="multiple-constraints" class="section level2" number="3.3">
<h2><span class="header-section-number">29.3</span> Multiple constraints</h2>
<p>Economists are familiar with the concept of a <a href="https://en.wikipedia.org/wiki/Production_function">production function</a>. This relates the amount of various inputs used in production to the amount of the product. There are all sorts of inputs: materials of different sorts, labor, specialized machinery, and so on. We’ll look at just two types of inputs: labor and capital. As an example, consider clothing manufacture. A factory could get by with simple needles and a lot of labor, or (as is more typical) with sewing machines and less labor. Which mix is best depends on the relative costs of labor and equipment. <span style="float: right; padding-left: 50px;"><a name="4855" href="#4855"><img src="www/icons8-signpost.png" title="Location: 4855" width="12px"/></a><span style="color: red; font-size: 6pt;">4855</red></span></p>
<p>There’s a standard model production function that’s based on a simple but meaningful observation: if both labor and capital are, say, doubled, the output should double as well. Just this principle leads to a formulation of the production function <span class="math inline">\(P(L, K)\)</span> as a power-law function: <span class="math display">\[P(L, K) \equiv b L^{a} K^{1-a}\]</span> This is called the <a href="https://en.wikipedia.org/wiki/Cobb%E2%80%93Douglas_production_function">Cobb-Douglas production function</a> and, whether realistic or not, will illustrate the principles at work. <span style="float: right; padding-left: 50px;"><a name="4860" href="#4860"><img src="www/icons8-signpost.png" title="Location: 4860" width="12px"/></a><span style="color: red; font-size: 6pt;">4860</red></span></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="constraints-and-optimization.html#cb20-1" aria-hidden="true" tabindex="-1"></a>P <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(b<span class="sc">*</span>L<span class="sc">^</span>a<span class="sc">*</span>K<span class="sc">^</span>(<span class="dv">1</span><span class="sc">-</span>a) <span class="sc">~</span> K <span class="sc">+</span> L, <span class="at">a =</span> <span class="fl">0.33</span>, <span class="at">b=</span><span class="dv">100</span>)</span>
<span id="cb20-2"><a href="constraints-and-optimization.html#cb20-2" aria-hidden="true" tabindex="-1"></a>budget_constraint <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(K <span class="sc">+</span> L <span class="sc">~</span> K <span class="sc">+</span> L)</span>
<span id="cb20-3"><a href="constraints-and-optimization.html#cb20-3" aria-hidden="true" tabindex="-1"></a>g_union <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(L <span class="sc">~</span> K <span class="sc">+</span> L)</span>
<span id="cb20-4"><a href="constraints-and-optimization.html#cb20-4" aria-hidden="true" tabindex="-1"></a>g_invest <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(K<span class="sc">/</span>L <span class="sc">~</span> K <span class="sc">+</span> L)</span>
<span id="cb20-5"><a href="constraints-and-optimization.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(<span class="fu">P</span>(K, L) <span class="sc">~</span> K <span class="sc">+</span> L, <span class="fu">domain</span>(<span class="at">K=</span><span class="fu">c</span>(<span class="fl">0.01</span>,<span class="dv">1</span>), <span class="at">L=</span><span class="fu">c</span>(<span class="fl">0.01</span>,<span class="dv">1</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="constraints-and-optimization.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contour_plot</span>(<span class="fu">budget_constraint</span>(K, L) <span class="sc">~</span> K <span class="sc">+</span> L,</span>
<span id="cb20-7"><a href="constraints-and-optimization.html#cb20-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">filled=</span><span class="cn">FALSE</span>, <span class="at">contour_color =</span> <span class="st">&quot;orange3&quot;</span>,</span>
<span id="cb20-8"><a href="constraints-and-optimization.html#cb20-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">contours_at =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.01</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-9"><a href="constraints-and-optimization.html#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># TAKE OUT THE FOLLOWING LINES BEFORE DEPLOYING</span></span>
<span id="cb20-10"><a href="constraints-and-optimization.html#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="do">## TAKE OUT</span></span>
<span id="cb20-11"><a href="constraints-and-optimization.html#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">### TAKE OUT</span></span>
<span id="cb20-12"><a href="constraints-and-optimization.html#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contour_plot</span>(<span class="fu">g_union</span>(K, L) <span class="sc">&gt;=</span> <span class="fl">0.5</span> <span class="sc">~</span> K <span class="sc">+</span> L, <span class="at">contour_at =</span> <span class="fl">0.5</span>,</span>
<span id="cb20-13"><a href="constraints-and-optimization.html#cb20-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">contour_color =</span> <span class="st">&quot;dodgerblue&quot;</span>, <span class="at">n_fill=</span><span class="dv">3</span>,</span>
<span id="cb20-14"><a href="constraints-and-optimization.html#cb20-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill_alpha =</span> <span class="fl">0.25</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb20-15"><a href="constraints-and-optimization.html#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contour_plot</span>(K<span class="sc">/</span>L <span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">~</span> K <span class="sc">+</span> L, <span class="at">contour_at =</span> <span class="fl">0.5</span>,</span>
<span id="cb20-16"><a href="constraints-and-optimization.html#cb20-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">contour_color =</span> <span class="st">&quot;green&quot;</span>, <span class="at">n_fill=</span><span class="dv">3</span>,</span>
<span id="cb20-17"><a href="constraints-and-optimization.html#cb20-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill_alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<pre><code>## Scale for &#39;colour&#39; is already present. Adding another scale for &#39;colour&#39;,
## which will replace the existing scale.</code></pre>
<pre><code>## Scale for &#39;fill&#39; is already present. Adding another scale for &#39;fill&#39;, which
## will replace the existing scale.</code></pre>
<pre><code>## Scale for &#39;colour&#39; is already present. Adding another scale for &#39;colour&#39;,
## which will replace the existing scale.</code></pre>
<pre><code>## Scale for &#39;fill&#39; is already present. Adding another scale for &#39;fill&#39;, which
## will replace the existing scale.</code></pre>
<pre><code>## Scale for &#39;colour&#39; is already present. Adding another scale for &#39;colour&#39;,
## which will replace the existing scale.</code></pre>
<pre><code>## Scale for &#39;fill&#39; is already present. Adding another scale for &#39;fill&#39;, which
## will replace the existing scale.</code></pre>
<p><img src="MOSAIC-Calculus_files/figure-html/mc2-1-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>In the graph we’ve scaled L and K to have units of $1M and $1M is “all the money that’s available.” You can see that production output increases with both L and K, reaching 100 widgets in the upper right corner of the graph. <span style="float: right; padding-left: 50px;"><a name="4865" href="#4865"><img src="www/icons8-signpost.png" title="Location: 4865" width="12px"/></a><span style="color: red; font-size: 6pt;">4865</red></span></p>
<p>What’s the optimal mix of labor and capital? As stated so far, we’re in a “more is better” situation. What creates the possibility for a finite argmax is a constraint: you can only spend the money that’s available. For instance, we could spend the budget only on labor or, alternatively, only on capital. The production output will be zero however. Better to spend on a mix of labor and capital. <span style="float: right; padding-left: 50px;"><a name="4870" href="#4870"><img src="www/icons8-signpost.png" title="Location: 4870" width="12px"/></a><span style="color: red; font-size: 6pt;">4870</red></span></p>
<p>The constraint here is of a very common sort: a budget constraint. We have one unit of money to spend; we could spend 30% on labor and 70% on capital, or any other mixture. The budget function has a very simple form: <span class="math inline">\(g_{budget}(K, L) \equiv K + L\)</span>, the sum of the two expenditures. Our budget of one unit of money implies the constraint <span class="math inline">\(g_{budget}(K, L) = 1\)</span>. You can draw this on the graph by adding a contour plot of <span class="math inline">\(g_{budget}\)</span>, drawing the contour at level 1 (we’ll . <span style="float: right; padding-left: 50px;"><a name="4875" href="#4875"><img src="www/icons8-signpost.png" title="Location: 4875" width="12px"/></a><span style="color: red; font-size: 6pt;">4875</red></span></p>
<p>Add the constraint contour to the graph made by the sandbox by uncommenting the appropriate lines in the sandbox.</p>
<p><strong>Question N</strong> Given the budget constraint, what’s the largest level of production that’s possible? (Choose the closest answer.)</p>
<p>    <span class="Zchoice">About 48 widgets<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">About 53 widgets<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">About 61 widgets<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">About 67 widgets<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question O</strong> Reading from the graph, where’s the argmax of the production function subject to the constraint?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">About <span class="math inline">\(K=0.66, L=0.34\)</span><span class="mcanswer">Good. </span></span><br />
</li>
<li><span class="Zchoice">About <span class="math inline">\(K=0.34, L=0.66\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">About <span class="math inline">\(K=0.5, L=0.4\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">About <span class="math inline">\(K=0.4, L=0.6\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>The problem as stated involves just one constraint: <span class="math inline">\(g_{budget}(K, L) = 1\$\)</span>M.</p>
<p>Now we’ll imagine situations where more constraints might come into play.</p>
<ul>
<li><p><strong>Scenario 1)</strong> In negotiating with the worker’s union, the company has promised to spend at least $500,000 on labor next year.</p>
<p>The constraint function here is <span class="math inline">\(g_{union}(K, L) = L\)</span> and you need to operate such that $g_{union}(K, L) &gt;= $ $500,000.</p></li>
<li><p><strong>Scenario 2)</strong> The US Department of Commerce has an “Re-invest in American Manufacturing” program. This provides an incentive of $50,000 so long as you use capital intensively, say at a level of at least 2 parts capital to one part labor. <span style="float: right; padding-left: 50px;"><a name="4880" href="#4880"><img src="www/icons8-signpost.png" title="Location: 4880" width="12px"/></a><span style="color: red; font-size: 6pt;">4880</red></span></p>
<p>The constraint function here is <span class="math inline">\(g_{invest}(K, L) = K/L\)</span> and, to qualify for the $50,000 incentive, you need to operate such that <span class="math inline">\(g_{invest} \geq 3\)</span>.</p></li>
</ul>
<p>Both of these are <strong>inequality</strong> constraints. In contrast, the budget constraint is an <strong>equality</strong> contraint: It’s only satisfied when you are in a lower-dimensional part (the red budget line) of the K-L space. Inequality constraints can be satisfied at a continuum of points. <span style="float: right; padding-left: 50px;"><a name="4885" href="#4885"><img src="www/icons8-signpost.png" title="Location: 4885" width="12px"/></a><span style="color: red; font-size: 6pt;">4885</red></span></p>
<p>Plotting the inequality constraints uses some special features of <code>contour_plot()</code>, so we’ll show you how to do it. For <span class="math inline">\(g_{union}()\)</span>, use the following in the sandbox</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="constraints-and-optimization.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pipe the previous graphics into</span></span>
<span id="cb27-2"><a href="constraints-and-optimization.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(<span class="fu">g_union</span>(K, L) <span class="sc">&gt;=</span> <span class="fl">0.5</span> <span class="sc">~</span> K <span class="sc">+</span> L, <span class="at">contour_at =</span> <span class="fl">0.5</span>,</span>
<span id="cb27-3"><a href="constraints-and-optimization.html#cb27-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">contour_color =</span> <span class="st">&quot;dodgerblue&quot;</span>, <span class="at">n_fill=</span><span class="dv">3</span>,</span>
<span id="cb27-4"><a href="constraints-and-optimization.html#cb27-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill_alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p>When you plot <span class="math inline">\(g_{union}(K, L) &gt; 0.4\)</span> you will see a blue line at the frontier where the constraint is just barely satisfied. The <strong>dark</strong> region is where the constraint is <strong>not</strong> satisfied.</p>
<p>The <strong>feasible set</strong> is the points in <span class="math inline">\((K, L)\)</span>-space which is simultaneously in a region that satisfies <span class="math inline">\(g_{union}(K, L) &gt; 0.5\)</span> as well as the budget constraint. So, along the red budget constraint but only that part in the <strong>light</strong> region that satisfied <span class="math inline">\(g_{union}(K,L) &gt; 0.5\)</span>. <span style="float: right; padding-left: 50px;"><a name="4890" href="#4890"><img src="www/icons8-signpost.png" title="Location: 4890" width="12px"/></a><span style="color: red; font-size: 6pt;">4890</red></span></p>
<p>The <strong>constrained argmax</strong> is the point in the feasible set that maximizes the production output. The <strong>constrained max</strong> the the value of the production function at the constrained argmax.</p>
<p><strong>Question P</strong> What is the constrainted max that satisfies the budget constraint as well as $g_{union}(K, L) &gt; 0.5?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">46<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">50<span class="mcanswer">Nice! Right. At the intersection of the red and blue contours.</span></span><br />
</li>
<li><span class="Zchoice">53<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">56<span class="mcanswer">︎✘ Constraints <em>never</em> point to a higher output than without the constraint.</span></span></li>
</ol>
<p>Notice that the <span class="math inline">\(g_{union}(K, L) &gt; 0.5\)</span> constraint prevents being able to operate at the point we reached with just the budget constraint. The cost of the union constraint to the company is 3 widgets.</p>
<p>Now comment out the union constraint and let’s look at the investment incentive constraint. For <span class="math inline">\(g_{invest}()\)</span>, use</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="constraints-and-optimization.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pipe the previous graphics into</span></span>
<span id="cb28-2"><a href="constraints-and-optimization.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(K<span class="sc">/</span>L <span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">~</span> K <span class="sc">+</span> L, <span class="at">contour_at =</span> <span class="fl">0.5</span>,</span>
<span id="cb28-3"><a href="constraints-and-optimization.html#cb28-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">contour_color =</span> <span class="st">&quot;green&quot;</span>, <span class="at">n_fill=</span><span class="dv">3</span>,</span>
<span id="cb28-4"><a href="constraints-and-optimization.html#cb28-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill_alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p>You’ll see that the feasible set is below the green contour, in the lower right part of the (K, L)-space. The cost of satisfying the investment constraint is practically zero: If the factory operates at the intersection of the red and green the output will still be 53 widgets. This is an example of a constraint that doesn’t change behavior. So far as this company is concerned, the Treasury Department is just giving away the incentive with no actual benefit. <span style="float: right; padding-left: 50px;"><a name="4895" href="#4895"><img src="www/icons8-signpost.png" title="Location: 4895" width="12px"/></a><span style="color: red; font-size: 6pt;">4895</red></span></p>
<p><strong>Question Q</strong> Is there any place where all three constraints—budget, union, investment—are all satisfied?</p>
<p>    <span class="Zchoice">Yes<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">No<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span></p>
<details>
<summary>
<strong>Exercise XX.XX</strong>: <span><a name="File: Exercises/cat-show-mug.Rmd" href="#LiJkK2"><img src="www/icons8-signpost.png" title="Location: Exercises/cat-show-mug.Rmd" width="12px"/></a><span style="color: red; font-size: 9pt;">LiJkK2</red></span>
</summary>
<p>In this exercise, you will work with an optimization problem. First, we’ll ask about a mathematical solution to the problem. Next, we’ll show that the mathematical solution is not necessarily the best real-world solution, because of multiple objectives in decision making. Then we’ll show you a real-world decision-making rubric that’s widely accepted, at least among people who listen to the whole story with an open mind.</p>
<p>The graph shows the estimated number of lives saved by three different health-care related interventions – A, B, C – as a function of the amount of money spent on each.</p>
<p><img src="MOSAIC-Calculus_files/figure-html/qaly-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>You have $1,000,000,000 to spend altogether on these interventions. Your policy alternatives are all the different combinations of spending on (A), (B), and (C) that add up to $1B (or less).</p>
<p>How should you split up the money among the interventions? For example, we could spend $125M on B, $125M on C, and $750M on A. This would save an estimated 346 lives. Can we do better?</p>
<p>Imagine that we use <span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span> and <span class="math inline">\(z\)</span> to denote expenditure, with <span class="math inline">\(x\)</span> spent on intervention A, <span class="math inline">\(y\)</span> on intervention B, and <span class="math inline">\(z\)</span> on intervention C. Altogether, the budget is <span class="math inline">\(x + y + z = \$1B\)</span>.</p>
<p><strong>Question A</strong> Suppose <span class="math inline">\(x = 750\)</span>, <span class="math inline">\(y = 125\)</span>, and <span class="math inline">\(z=125\)</span>, where units are millions of dollars. It’s suggested that reducing <span class="math inline">\(x\)</span> by $1M in order to increase <span class="math inline">\(z\)</span> by that amount will produce a better outcome in terms of the total number of lives saved. That is, move some money from intervention A to intervention C. Is this suggestion correct? Why or why not?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">Not correct. The number of lives saved by spending $750M on A is larger than the number that would be saved by spending that much on B or C.<span class="mcanswer">︎✘ We’re only talking about moving a small amount from A to C</span></span><br />
</li>
<li><span class="Zchoice">Not correct. We will want to move the money to B instead.<span class="mcanswer">︎✘ Be that as it may, the question was whether to move money from A to C.</span></span><br />
</li>
<li><span class="Zchoice">Correct. The derivative <span class="math inline">\(\partial_x A(x)\)</span> at <span class="math inline">\(x=750\)</span> is smaller than the derivative <span class="math inline">\(\partial_z C(z)\)</span> at <span class="math inline">\(z=125\)</span>.<span class="mcanswer">Nice! Reducing <span class="math inline">\(x\)</span> by a small amount will reduce the output <span class="math inline">\(A(x)\)</span>, but since <span class="math inline">\(\partial_z C(z=125)\)</span> is greater, the loss in output due to a reduction in spending on A will be more than made up by an increase in output from spending more on C.</span></span><br />
</li>
<li><span class="Zchoice">Correct. We should spend equally on all three interventions. That is, set <span class="math inline">\(x = y = z = 333.33....\)</span><span class="mcanswer">︎✘ This is intuitively attractive, but still doesn’t address the question of whether the outcome would be improved by moving money from A to C.</span></span></li>
</ol>
<p>A general principle is this: If spending a little more on one intervention increases the output more than the loss due to spending less on another intervention, the shift in funding is worthwhile.</p>
<p><strong>Question B</strong> If you follow the above logic, you will continue to move money from A to C until it is no longer beneficial to do so. What will be the maximum amount of spending on A makes it not worthwhile to move additional money from A to C? (Choose the closest answer.)</p>
<p>    <span class="Zchoice">$250M<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">$375M<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice"><span class="math inline">\(500M&lt;span class=&#39;mcanswer&#39;&gt;\)</span> $</span></span>       <span class="Zchoice">$625M<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question C</strong> Imagine that you have moved all the money from A to C that it’s worthwhile to do . Which of these statements is true at those values <span class="math inline">\(x_0\)</span>, <span class="math inline">\(z_0\)</span>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\(\partial_x A(x_0) = \partial_z C(z_0)\)</span><span class="mcanswer">Right! </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(A(x_0) = C(z_0)\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(C(x_0) = A(z_0)\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\(\partial_x A(x_0) = 0\)</span> and <span class="math inline">\(\partial_z C(z_0) = 0\)</span>.<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>We found it worthwhile to move expenditure from A to C to optimize the sum of their outputs and are operating at about <span class="math inline">\(x_0 = \$500M\)</span> and <span class="math inline">\(z_0 = \$375M\)</span>, leaving <span class="math inline">\(y=\$125M\)</span> to spend on intervention B. Is it worthwhile to move money from A or C to B or vice versa? But first, a simpler question.</p>
<p><strong>Question D</strong> If we were going to move a small amount of money from A or C into B, would it be better to take the money from A or from C? Why?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">Take it from A, since we’re spending far more on A than C.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Take it from C, since we’re already spending far less on C than on A.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Take it from C. The slope <span class="math inline">\(\partial_z C(z_0)\)</span> compared to <span class="math inline">\(\partial_x A(z_0)\)</span> is such that a small reduction on spending on C has less impact than a small reduction in spending on A.<span class="mcanswer">Correct. </span></span><br />
</li>
<li><span class="Zchoice">Take it from A. The slope <span class="math inline">\(\partial_z C(z_0)\)</span> compared to <span class="math inline">\(\partial_x A(z_0)\)</span> is such that a small reduction on spending on A has less impact than a small reduction in spending on C.<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question E</strong> Right now in our process, we’re planning to spend $125M on B. Is it worthwhile to move money from C to B?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">No, the output of B larger than the output of C at $125M.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Yes, move most of the money from C to B.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Yes, but only move a little money from C to B.<span class="mcanswer">Good. </span></span><br />
</li>
<li><span class="Zchoice">No, move money from B to C.<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question F</strong> At the optimal amount of money <span class="math inline">\(y^\star\)</span> spent on B and <span class="math inline">\(z^\star\)</span> spent on C, which of these is true about the slopes <span class="math inline">\(\partial_y B(y^\star)\)</span> and <span class="math inline">\(\partial_z C(z^\star)\)</span>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">There’s not any fixed relationship. They are what they are.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The two slopes are equal.<span class="mcanswer">Excellent! </span></span><br />
</li>
<li><span class="Zchoice">The slope of B is greater than the slope of C.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The slope of C is greater than the slope of B.<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question G</strong> Is it more proper to say the “<strong>slope</strong> <span class="math inline">\(\partial_z C(z^\star)\)</span>” rather than the “<strong>derivative</strong> <span class="math inline">\(\partial_z C(z^\star)\)</span>?” (This is a general review problem for the course, not something specifically about optimization.)</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">Yes. A derivative is a function while a slope is a quantity.<span class="mcanswer">Nice! </span></span><br />
</li>
<li><span class="Zchoice">No. Slope and derivative are the same thing.<span class="mcanswer">︎✘ No, the derivative is a function. When you <strong>evaluate</strong> that function at a particular value of <span class="math inline">\(z\)</span> (say, <span class="math inline">\(z^\star\)</span>) the output will be the slope of the original function at that value of <span class="math inline">\(z\)</span>.</span></span><br />
</li>
<li><span class="Zchoice">Yes. “Derivative” sounds fancier than “slope”.<span class="mcanswer">︎✘ It’s not a matter of fancy, it’s a matter of being precise.</span></span><br />
</li>
<li><span class="Zchoice">No. Slopes measure steepness from right to left, while derivatives give steepness from left to right.<span class="mcanswer">︎✘ Where did that come from. The convention for the sign of a slope is always the direction left to right.</span></span></li>
</ol>
<p><strong>Background:</strong> The graphs are fictitious, but let’s pretend they are:</p>
<ul>
<li><strong>A</strong> Surgical treatment of congenital heart defects in newborns.</li>
<li><strong>B</strong> Treatment for hemophilia.</li>
<li><strong>C</strong> Memory-care for people with Alzheimers.</li>
</ul>
<p>Notice that the people being affected are in different, non-overlapping groups. So moving funding from one group to another is effectively “robbing Peter to pay Paul.” If you, as a decision maker inherited a situation where <span class="math inline">\(x = \$750M\)</span>, <span class="math inline">\(y=\$125M\)</span>, and <span class="math inline">\(z=\$125M\)</span>, changing the expenditures would make one group better off (no matter how you did it!) and would make another group worse off. And imagine the headlines if you moved money from A to C or B: “Government slashes funding for newborns!”. Or perhaps an editorial: “We need to find a way to increase funding for hemophilia without cutting other life-saving spending.” This raises an important question: Is it ever worthwhile to forgo spending to save lives? How would anyone decide which lives are worth saving? Most people are uncomfortable with such questions. Yet the decisions taken by leaders, whatever they be, inevitably have a mathematically equivalent formulation which translates to the value of life.</p>
<p>Probably, most people would decline to make a decision comparing two lives, for instance, saving a 10-year old versus saving a 90-year old. But it is not always possible to escape such trade-offs and the people who need to take the decision need guidance about what to do. In an open society, we expect such decisions to be backed by good rationale and so we have to develop means for distinguishing between better and worse rationales.</p>
<p>One example comes from epidemiology and the concept of a “<a href="https://en.wikipedia.org/wiki/Quality-adjusted_life_year">quality-adjusted life year</a>” (QALY). A QALY is a measure of duration of life adjusted for the health condition of the person — a year of a person in good health is 1 QALY, but a year in a person in very poor health is less than 1 QALY.</p>
<p>QALYs do not solve the problem of optimizing health-related outcomes. They are an imperfect means of dealing with an impossible problem. Sometimes that is the best we can do.</p>
</details>
<details>
<summary>
<strong>Exercise XX.XX</strong>: <span><a name="File: Exercises/crow-trim-laundry.Rmd" href="#h05BsT"><img src="www/icons8-signpost.png" title="Location: Exercises/crow-trim-laundry.Rmd" width="12px"/></a><span style="color: red; font-size: 9pt;">h05BsT</red></span>
</summary>
<p>You are a member of a health-care oversight committee that allocates funds for investment in health-care facilities. The committee has two proposal before it and needs to decide how best to spend the available $50M budget:</p>
<ul>
<li><strong>Proposal A</strong>: Expansion of the pediatric organ transplant unit.</li>
<li><strong>Proposal B</strong>: Creation of a new rehabilitation center for traumatic injury patients.</li>
</ul>
<p>Experts have evaluated each proposal in terms of different cost options and the impact that each will have on health outcomes. Following a standard epidemiological method, the impact is estimated in terms of “Quality Adjusted Life-Years” (QALY), a measure that combines the number of people affected, the number of years of prolonged life, and the improvement in quality of life for those treated.</p>
<p>The expert estimates are available in the data frame <code>QALY_impact</code>:</p>
<p><strong>QALY Impact of the Proposals</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="constraints-and-optimization.html#cb29-1" aria-hidden="true" tabindex="-1"></a>QALY_impact</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   expend     A     B
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      0     0     0
## 2     10    40    30
## 3     20   100    80
## 4     30   150   140
## 5     40   170   160
## 6     50   180   175</code></pre>
<p>Such estimates from experts should be taken with a grain of salt, but they are often the best information you have to inform a model.</p>
<p>You can turn the expert’s opinions into functions by using splines. In this case, there is good reason to think that output will increase monotonically with expenditure, so a monotonic spline is a good choice. The functions were created using these commands and are already available in your sandboxes:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="constraints-and-optimization.html#cb31-1" aria-hidden="true" tabindex="-1"></a>fA <span class="ot">&lt;-</span> <span class="fu">spliner</span>( A <span class="sc">~</span> expend, <span class="at">data=</span>QALY_impact, <span class="at">monotonic=</span><span class="cn">TRUE</span>)</span>
<span id="cb31-2"><a href="constraints-and-optimization.html#cb31-2" aria-hidden="true" tabindex="-1"></a>fB <span class="ot">&lt;-</span> <span class="fu">spliner</span>( B <span class="sc">~</span> expend, <span class="at">data=</span>QALY_impact, <span class="at">monotonic=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>The problem is to find the best values for expenditures on Proposal A and B — call these expenditures <span class="math inline">\(x_A\)</span> and <span class="math inline">\(x_B\)</span> – given constraint that total expenditure is <span class="math inline">\(x_A + x_B = 50\)</span>.</p>
<p>A simple approach is to plot out the total benefit as a function of expenditures on each of A and B:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="constraints-and-optimization.html#cb32-1" aria-hidden="true" tabindex="-1"></a>overall <span class="ot">&lt;-</span> <span class="fu">makeFun</span>( <span class="fu">fA</span>(xA) <span class="sc">+</span> <span class="fu">fB</span>(xB) <span class="sc">~</span> xA <span class="sc">+</span> xB)</span>
<span id="cb32-2"><a href="constraints-and-optimization.html#cb32-2" aria-hidden="true" tabindex="-1"></a>g_budget <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(xA <span class="sc">+</span> xB <span class="sc">~</span> xA <span class="sc">+</span> xB)</span>
<span id="cb32-3"><a href="constraints-and-optimization.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(<span class="fu">overall</span>(xA, xB) <span class="sc">~</span> xA  <span class="sc">+</span> xB, </span>
<span id="cb32-4"><a href="constraints-and-optimization.html#cb32-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">domain</span>(<span class="at">xA=</span><span class="fu">range</span>(<span class="dv">0</span>,<span class="dv">50</span>), <span class="at">xB=</span><span class="fu">range</span>(<span class="dv">0</span>,<span class="dv">50</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb32-5"><a href="constraints-and-optimization.html#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contour_plot</span>(<span class="fu">g_budget</span>(xA, xB) <span class="sc">~</span> xA <span class="sc">+</span> xB, <span class="at">filled=</span><span class="cn">FALSE</span>,</span>
<span id="cb32-6"><a href="constraints-and-optimization.html#cb32-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">contours_at=</span><span class="cn">NULL</span>, <span class="at">contour_color=</span><span class="st">&quot;orange3&quot;</span>, <span class="at">alpha=</span><span class="fl">0.5</span>)</span></code></pre></div>
<p>How can you confirm that the red contours in the plot genuinely represent the budget constraint at the indicated level?</p>
<p><strong>Question A</strong> What’s the largest number of QALYs that can be produced from combining
the two proposals with a total budget of $50M?</p>
<p>    <span class="Zchoice">120<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">160<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">180<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">240<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">300<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">340<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">350<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">360<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question B</strong> What is the location of the argmax in the previous graph?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice"><span class="math inline">\((A = 0, B = 50)\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\((A = 6, B = 44)\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\((A = 12, B = 38)\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\((A = 22, B = 28)\)</span><span class="mcanswer">Nice! </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\((A = 34, B = 16)\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\((A = 41, B = 9)\)</span><span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice"><span class="math inline">\((A = 50, B = 0)\)</span><span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>Another way to look at the problem is to find the total QALY outcome as a function of the amount <span class="math inline">\(x_A\)</span>, recognizing that once <span class="math inline">\(x_A\)</span> is set, the remaining money will go to option B, so <span class="math inline">\(x_B = 50-x_A\)</span>. The following sandbox makes the plot.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="constraints-and-optimization.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_plot</span>( <span class="fu">fA</span>(xA) <span class="sc">+</span> <span class="fu">fB</span>(<span class="dv">50</span><span class="sc">-</span>xA) <span class="sc">~</span>xA, <span class="fu">domain</span>(<span class="at">xA =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">50</span>)))</span></code></pre></div>
<p><strong>Changing the Budget</strong></p>
<p>A broader social question is whether the budget is being set at an appropriate level. One way to examine this is to look at how the QALY outcome changes as the budget changes.</p>
<p>For this, we’re going to find the set of non-dominated solutions, that is, all the values of <span class="math inline">\(x_A\)</span> and <span class="math inline">\(x_B\)</span> at which the derivatives <span class="math inline">\(\partial_{x_A} f_A()\)</span> and <span class="math inline">\(\partial_{x_B} f_B()\)</span> are equal.</p>
<p>The following sandbox shows the difference between those two derivatives along with a bunch of different constraint paths.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="constraints-and-optimization.html#cb34-1" aria-hidden="true" tabindex="-1"></a>dfA <span class="ot">=</span> <span class="fu">D</span>(<span class="fu">fA</span>(xA)<span class="sc">~</span>xA)</span>
<span id="cb34-2"><a href="constraints-and-optimization.html#cb34-2" aria-hidden="true" tabindex="-1"></a>dfB <span class="ot">=</span> <span class="fu">D</span>(<span class="fu">fB</span>(xB)<span class="sc">~</span>xB)</span>
<span id="cb34-3"><a href="constraints-and-optimization.html#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>( <span class="fu">dfA</span>(xA) <span class="sc">-</span> <span class="fu">dfB</span>(xB) <span class="sc">~</span> xA<span class="sc">&amp;</span>xB, </span>
<span id="cb34-4"><a href="constraints-and-optimization.html#cb34-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">domain</span>(<span class="at">xA=</span><span class="fu">range</span>(<span class="dv">0</span>,<span class="dv">50</span>), <span class="at">xB=</span><span class="fu">range</span>(<span class="dv">0</span>,<span class="dv">50</span>)),</span>
<span id="cb34-5"><a href="constraints-and-optimization.html#cb34-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">contours_at =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">2</span>), <span class="at">skip=</span><span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-6"><a href="constraints-and-optimization.html#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contour_plot</span>(xA <span class="sc">+</span> xB <span class="sc">~</span> xA <span class="sc">+</span> xB, <span class="at">contour_color=</span><span class="st">&quot;orange3&quot;</span>, <span class="at">skip=</span><span class="dv">0</span>)</span></code></pre></div>
<p><strong>Yet another constraint!</strong></p>
<p><strong>Question C</strong> The American Association of Allergy Activists (AAAA) has lobbied Congress to mandate that, of the 50 units of available funds, funding for A must be <span class="math inline">\(x_A \geq 40\)</span>. How much would this constraint reduce the overall output for the two interventions combined? (Remember, if you’re spending, say, 45 on A, you can’t spend more than the remaining 5 on B.) The challenge for you in answering this question is to pick the appropriate one of the above graphs. Once you have done that, the answer is evident.</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">No reduction at all.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">About 10-20 QALYs.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">About 40-60 QALYs.<span class="mcanswer">Excellent! </span></span><br />
</li>
<li><span class="Zchoice">About 100-120 QALYs.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">It would actually <em>increase</em> the output.<span class="mcanswer">︎✘ </span></span></li>
</ol>
</details>
</div>
<div id="changing-constraints" class="section level2" number="3.4">
<h2><span class="header-section-number">29.4</span> Changing constraints</h2>
<p>Imagine now that you are the factory manager and are briefing your company’s Board of Directors about the planned production for next year. You say, “Production next year will be 53 widgets.” A gruff member of the Board insists this isn’t adequate, claiming, “We have a market for more widgets than that! And they sell for $10,000 each!” <span style="float: right; padding-left: 50px;"><a name="4900" href="#4900"><img src="www/icons8-signpost.png" title="Location: 4900" width="12px"/></a><span style="color: red; font-size: 6pt;">4900</red></span></p>
<p>Spend a minute to think what would have to change in order to increase production beyond 53 widgets. Then think about how you would decide whether $10,000 per widget is a good reason to increase production. <span style="float: right; padding-left: 50px;"><a name="4905" href="#4905"><img src="www/icons8-signpost.png" title="Location: 4905" width="12px"/></a><span style="color: red; font-size: 6pt;">4905</red></span></p>
<p>Now let’s do it mathematically. A sensible response to the gruff member of the Board is, “We’ll need to increase the production budget. Let’s see if that’s worthwhile.”</p>
<p>Here’s a sandbox to graph out a constraint along with the Cobb-Douglas production function.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="constraints-and-optimization.html#cb35-1" aria-hidden="true" tabindex="-1"></a>P <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(b<span class="sc">*</span>L<span class="sc">^</span>a<span class="sc">*</span>K<span class="sc">^</span>(<span class="dv">1</span><span class="sc">-</span>a) <span class="sc">~</span> K <span class="sc">+</span> L, <span class="at">a =</span> <span class="fl">0.33</span>, <span class="at">b=</span><span class="dv">100</span>)</span>
<span id="cb35-2"><a href="constraints-and-optimization.html#cb35-2" aria-hidden="true" tabindex="-1"></a>g_budget <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(K <span class="sc">+</span> L <span class="sc">~</span> K <span class="sc">+</span> L)</span>
<span id="cb35-3"><a href="constraints-and-optimization.html#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(<span class="fu">P</span>(K, L) <span class="sc">~</span> K <span class="sc">+</span> L, <span class="fu">domain</span>(<span class="at">K=</span><span class="fu">c</span>(.<span class="dv">6</span>,.<span class="dv">7</span>), <span class="at">L=</span><span class="fu">c</span>(.<span class="dv">3</span>,.<span class="dv">4</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="constraints-and-optimization.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contour_plot</span>(<span class="fu">g_budget</span>(K, L) <span class="sc">~</span> K <span class="sc">+</span> L,</span>
<span id="cb35-5"><a href="constraints-and-optimization.html#cb35-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">filled=</span><span class="cn">FALSE</span>, <span class="at">contour_color =</span> <span class="st">&quot;orange3&quot;</span>,</span>
<span id="cb35-6"><a href="constraints-and-optimization.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="do">## GET RID OF THE 1.01 contour before deploying</span></span>
<span id="cb35-7"><a href="constraints-and-optimization.html#cb35-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">contours_at =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.01</span>))</span></code></pre></div>
<p><img src="MOSAIC-Calculus_files/figure-html/sp2-1-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>This is exactly the same graph as in the previous section but this time zoomed in around the argmax. Notice that the production function contours, which were curved in the previous section, now are practically straight lines. Yet another example of the principle in calculus that if you look closely enough around a point on a curve, the curve will seem like a straight line. <span style="float: right; padding-left: 50px;"><a name="4910" href="#4910"><img src="www/icons8-signpost.png" title="Location: 4910" width="12px"/></a><span style="color: red; font-size: 6pt;">4910</red></span></p>
<p><strong>Question D</strong> Maybe we were mistaken in claiming that the graph made by the code in the sandbox zooms in around the argmax. Which of these tests would allow you to determine if indeed the argmax is in the graphics frame?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">The constraint contour is tangent to a production function contour.<span class="mcanswer">Nice! </span></span><br />
</li>
<li><span class="Zchoice">The constraint contour crosses a production function contour.<span class="mcanswer">︎✘ If so, then the path of the constraint function is heading either uphill or downhill, not level.</span></span><br />
</li>
<li><span class="Zchoice">The constraint contour appears in the graphics frame.<span class="mcanswer">︎✘ But this doesn’t rule out the frame being somewhere other than around the argmax.</span></span><br />
</li>
<li><span class="Zchoice">The production 53 contour appears in the graphics frame.<span class="mcanswer">︎✘ But there are many places away from the argmax where the 53 contour appears.</span></span></li>
</ol>
<p>Here’s a process for determining if increasing the budget is worthwhile. It draws on information about the production function and the value of an additional widget.</p>
<ol style="list-style-type: decimal">
<li>Add a new constraint contour at a somewhat bigger budget, say $1.01M. You can do this by changing the argument <code>contours_at = 1</code> to be <code>contours_at = c(1, 1.01)</code>.</li>
<li>Calculate the production output at the new budget level.</li>
<li>Find out how much the production <strong>output</strong> increased from the original budget level to the new $1.01M budget level.</li>
<li>Divide the increase in the budget by the change in production (3). This is the <strong>shadow price</strong>/<strong>Lagrange multiplier</strong>. It has units of dollars/widget.</li>
</ol>
<p><strong>Question E</strong> What’s the optimal production level when the budget is $1.01M?</p>
<p>    <span class="Zchoice">53.1<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">53.5<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">54<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">55.5<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question F</strong> What’s the shadow price of producing another widget</p>
<p>    <span class="Zchoice">$1000 per widget<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">$5000 per widget<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">$15,000 per widget<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice"><span class="math inline">\(20,000 per widget&lt;span class=&#39;mcanswer&#39;&gt;\)</span> $</span></span></p>
<p><strong>Question G</strong> Is it worthwhile to increase the production budget?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">Yes<span class="mcanswer">︎✘ So you’re willing to spend $20,000 to produce something that sells for $10,000?</span></span><br />
</li>
<li><span class="Zchoice">No<span class="mcanswer">Nice! Right. Who would spend $20,000 to produce something that sells for $10,000?</span></span><br />
</li>
<li><span class="Zchoice">Not enough information is available<span class="mcanswer">︎✘ Really? You know the cost and the benefit. That’s enough to make a decision.</span></span></li>
</ol>
</div>
<div id="incommensurate-objectives" class="section level2" number="3.5">
<h2><span class="header-section-number">29.5</span> Incommensurate objectives</h2>
<p>Just as the word “cooperate” means to “work together” (“co” + “operate”), the word “commensurate” means to “measure together” or to measure in the same way. Since you already know about different units and dimensions, an example in that domain can make the meaning concrete. An inch and a mile are commensurate quantities. Obviously, an inch and a mile are not equal, but you can <em>compare</em> them in an objective way. (An inch is 0.000015783 miles.) Similarly, a litre and a gallon are commensurate, but having the dimension L<sup>3</sup>, neither is commensurate with a quantity of dimension L. <span style="float: right; padding-left: 50px;"><a name="4915" href="#4915"><img src="www/icons8-signpost.png" title="Location: 4915" width="12px"/></a><span style="color: red; font-size: 6pt;">4915</red></span></p>
<p>A large number of decisions involve money in some way. It’s routine to decide whether a purchase is “worth the money.” But we do this by applying a judgment that is subjective, e.g. is it worthwhile to buy the more expensive chocolate? The decision involves comparing two <em>incommensurate</em> things: the money vs the good feelings that come from eating or giving a fine treat. <span style="float: right; padding-left: 50px;"><a name="4920" href="#4920"><img src="www/icons8-signpost.png" title="Location: 4920" width="12px"/></a><span style="color: red; font-size: 6pt;">4920</red></span></p>
<p>That things are incommensurate does not at all mean that you can’t make decisions that put one against the other, just that there is no ready, objective means to do the comparison.</p>
<p>As an example of how incommensurability can frustrate decision making … In the 1990s the Federal Aviation Administration (FAA) was considering a policy of requiring safety seats for infants and children on flying. (For infants, the standard was “babe in arms”: the infant could be carried on the plane and held by the caretaker, without needing a separate seat for the baby.) As you might expect, the issue was the extra costs for parents versus the increased safety of the child safety seat. The American College of Pediatrics lobbied in favor of the safety seats, travel agents lobbied against the requirement. The FAA could not reach a decision. That’s somewhat surprising because the FAA necessarily makes decisions that compare money and safety, for instance in the requirements for a passenger evacuation system or life rafts. I guess nobody is objective about babies! <span style="float: right; padding-left: 50px;"><a name="4925" href="#4925"><img src="www/icons8-signpost.png" title="Location: 4925" width="12px"/></a><span style="color: red; font-size: 6pt;">4925</red></span></p>
<p>After a decade or so, the FAA decided <em>not</em> to require the safety seats. What broke the log-jam of incommensurability was a study done of how parents would respond to the increase in cost of flying with babies. It was determined that the increased cost would push parents to drive rather than fly for short- or mid-distance trips. Driving is much more dangerous than commercial aviation and so the expected number of injuries or deaths would be larger were the safety-seat requirement instituted than if not. In other words, the comparison of lives to lives (driving risk versus flying risk) was easy, but the comparison of baby lives to money was impossible. <span style="float: right; padding-left: 50px;"><a name="4930" href="#4930"><img src="www/icons8-signpost.png" title="Location: 4930" width="12px"/></a><span style="color: red; font-size: 6pt;">4930</red></span></p>
<p>Over the next few classes, you will learn some mathematical techniques for decision-making in the face of incommensurate objectives (e.g. save money versus save lives). It’s important to note that there is no mathematical <em>solution</em> to the problem. Rather, mathematics can provide tools to clarify the trade-offs and, in much the same way as the resolution of the FAA’s policy problem, can sometimes offer a sensible way forward. <span style="float: right; padding-left: 50px;"><a name="4935" href="#4935"><img src="www/icons8-signpost.png" title="Location: 4935" width="12px"/></a><span style="color: red; font-size: 6pt;">4935</red></span></p>
<p>It’s worth mentioning some of the common, non-mathematical ways that people deal with incommensurates. I’ll call these “heuristics.” The <a href="https://en.wikipedia.org/wiki/Heuristic">Wikipedia definition of “heuristic”</a> is pretty good: <span style="float: right; padding-left: 50px;"><a name="4940" href="#4940"><img src="www/icons8-signpost.png" title="Location: 4940" width="12px"/></a><span style="color: red; font-size: 6pt;">4940</red></span></p>
<blockquote>
<p><em>[A]ny approach to problem solving … that employs a practical method that is not guaranteed to be optimal, perfect, or rational, but is nevertheless sufficient for reaching an immediate, short-term goal or approximation. Where finding an optimal solution is impossible or impractical, heuristic methods can be used to speed up the process of finding a satisfactory solution. Heuristics can be mental shortcuts that ease the cognitive load of making a decision.</em> <span style="float: right; padding-left: 50px;"><a name="4945" href="#4945"><img src="www/icons8-signpost.png" title="Location: 4945" width="12px"/></a><span style="color: red; font-size: 6pt;">4945</red></span></p>
</blockquote>
<p>A very common heuristic is to simply deny that any trade-off exists. This is seen most clearly in the dispute about climate change. The trade-off here is the cost of climate remediation policies (such as a carbon tax) versus the disruption and dislocation caused by the changing climate. One one side of the debate are people who deny that climate change is happening or that it is caused by human activity that can be mitigated. On the other side of the debate are people who insist that the economic changes called for will not only reduce climate-change harm but will positively affect the economy, create jobs, etc. The rest of us are in the middle, recognizing both sides of the problem. <span style="float: right; padding-left: 50px;"><a name="4950" href="#4950"><img src="www/icons8-signpost.png" title="Location: 4950" width="12px"/></a><span style="color: red; font-size: 6pt;">4950</red></span></p>
<p>Another heuristic is to play the trump cards of morality and human rights. Once someone claims the the issue is fundamentally one of morality, it’s hard to have conversation about the trade-offs involved. (If everyone agreed about morality, it would be easier. But one person’s divine truth is another person’s opinion.) In the US, the debate about health-care policy is not a measured discussion of how available resources should be distributed to best effect but a competition between perceived moral or ethical stances: “the government has no business making medical decisions for me” versus “affordable health care is a human right.” <span style="float: right; padding-left: 50px;"><a name="4955" href="#4955"><img src="www/icons8-signpost.png" title="Location: 4955" width="12px"/></a><span style="color: red; font-size: 6pt;">4955</red></span></p>
<p>It is not our place in CalcZ to enter into deep conversation about political or moral philosophy. Rather, by introducing the concepts of incommensurability and heuristic, we intend to guide the mathematical discussion toward a framework for making impossible decisions in a thoughtful and responsible manner. <span style="float: right; padding-left: 50px;"><a name="4960" href="#4960"><img src="www/icons8-signpost.png" title="Location: 4960" width="12px"/></a><span style="color: red; font-size: 6pt;">4960</red></span></p>
</div>
<div id="multiple-objectives" class="section level2" number="3.6">
<h2><span class="header-section-number">29.6</span> Multiple objectives</h2>
<p>It often happens that decisions involve multiple simultaneous objectives. In one context or another, each of these considerations can play a role in decision making:</p>
<ul>
<li>safety</li>
<li>cost</li>
<li>human life</li>
<li>animal welfare</li>
<li>collateral damage</li>
<li>public or political reaction</li>
</ul>
<p>This is by no means an exclusive list.</p>
<p>In specialized domains more specific competing objectives are often part of the design goal. For instance, consider aircraft design:</p>
<ul>
<li>range</li>
<li>payload or cargo capacity</li>
<li>short take-off and landing</li>
<li>maneuverability</li>
<li>mission suitability</li>
<li>multi-mission capability</li>
<li>maintenability</li>
<li>stealth</li>
</ul>
<p>Over the next few lessons, we’re going to introduce concepts that are important to effective thinking about designing with multiple objectives as well as mathematical tools that help in balancing conflicting objectives. As you will see, there is no single “correct” or “best” solution to such problems. Indeed, there is a mathematical theorem about when there <strong>cannot</strong> be a best solution. However—and this may seem contractictory at first—some solutions are better than others. Mathematics also provides a framework for a systematic and documentable process which provides a role for the inevitable elements of human, subjective values. <span style="float: right; padding-left: 50px;"><a name="4965" href="#4965"><img src="www/icons8-signpost.png" title="Location: 4965" width="12px"/></a><span style="color: red; font-size: 6pt;">4965</red></span></p>
<p>First, we’ll cover elementary mathematical principles that demonstrate both that there is no single “best” solution while yet allowing some solutions to be better than others. Important vocabulary here includes <strong>“incommensuate”</strong>, <strong>dominating</strong> and <strong>non-dominating</strong> solutions(along with <strong>pareto optimality</strong>), <strong>decision frontier</strong>, and <strong>social utility function</strong>. <span style="float: right; padding-left: 50px;"><a name="4970" href="#4970"><img src="www/icons8-signpost.png" title="Location: 4970" width="12px"/></a><span style="color: red; font-size: 6pt;">4970</red></span></p>
<p>Second, we’ll briefly discuss some <strong>heuristics</strong> that people and groups often use, without necessarily realizing it, in solving multi-objective optimization problems. Awareness of such heuristics helps in identifying (often unstated) objectives implicit in the decision and enables you, by making them <strong>explicit</strong>, to clarify the problem and potentially open it up to useful discussion and <strong>negotiation</strong>. <span style="float: right; padding-left: 50px;"><a name="4975" href="#4975"><img src="www/icons8-signpost.png" title="Location: 4975" width="12px"/></a><span style="color: red; font-size: 6pt;">4975</red></span></p>
<p>Later, we’ll use the mathematics of <strong>constraints</strong> and <strong>constraint functions</strong> to support a process of rational decision making that nonetheless leaves space for subjectivity in valuing outcomes.</p>
<div class="todo">
<p>MAYBE TRANSCLUDE THIS INTO THE TEXT?</p>
</div>
</div>
<div id="multi-objective-decision-making" class="section level2" number="3.7">
<h2><span class="header-section-number">29.7</span> Multi-objective decision making</h2>
<p>Recall that we described a strategy for working with <strong>incommensurate</strong> objectives, that is, objectives such as “minimize money spent” and “maximize lives saved” that have no generally agreed common scale on which they can be compared. (“Mensurate” comes from the Latin for “measure.” “Commensurate” means measured on the same scale.) We call that strategy <strong>multi-objective</strong> optimization. This is by no means a magical way of pulling ethical values or human preferences out of the universe. It is instead a mathematical framework for setting up the task to quantify correctly the tradeoffs between objectives. What use one makes of this information is entirely a matter for human decision making. <span style="float: right; padding-left: 50px;"><a name="4980" href="#4980"><img src="www/icons8-signpost.png" title="Location: 4980" width="12px"/></a><span style="color: red; font-size: 6pt;">4980</red></span></p>
<p>The setting for multi-objective optimization is this:</p>
<ol style="list-style-type: lower-roman">
<li>You have a set of <em>policy alternatives</em> from amongst which you want to choose the “best.” Sometimes these policy alternatives are discrete, e.g. whether to buy something or not. In this calculus course, we emphasize <em>continuous</em> policy alternatives, those that are represented by one or more numbers. Examples: How much money to spend on each of several modes of providing health care; How to set the length and diameter of a cylindrical tank.</li>
<li>You have a set of <em>objective functions</em>, each corresponding to one of the incommensurate objectives. Each objective function takes any of the policy alternatives as input and produces an output on its own scale. Examples: Lived saved; Money spent; Cardboard box volume; Area of cardboard used to create the box. <span style="float: right; padding-left: 50px;"><a name="4985" href="#4985"><img src="www/icons8-signpost.png" title="Location: 4985" width="12px"/></a><span style="color: red; font-size: 6pt;">4985</red></span></li>
</ol>
<p>The process is this:</p>
<ol style="list-style-type: lower-roman">
<li>You, the decision maker, select <em>one</em> of the objective functions to be <em>the</em> objective function. Mathematically, it doesn’t matter which one.</li>
<li>The other objective functions become <strong>constraint functions</strong>. You, the decision maker, select a <strong>level</strong> for each constraint. Examples: The money available for health care (budget constraint); The volume that the cardboard box must contain.</li>
<li>Find the argmax of the objective function in (i) subject to the constraint in (ii). This is an entirely automatic operation; there are no value judgments involved.</li>
<li>Find the shadow price (also called the Lagrange multiplier) for each of the constraints in (ii). This is the change in output of the objective function in (i) when the <em>level</em> of the constraint is changed slightly. This also is an entirely automatic operation with no value judgments involved.</li>
<li>Now you again step in to make some decisions. Examine each of the shadow prices, one for each constraint. Your job is to decide whether the shadow price is worthwhile, in much the same way that you might decide whether the price of a snack is worthwhile. But, whereas your you make a go/no-go decision with the snack, with the shadow price you make a more graded decision. The possibilities are:
<ol style="list-style-type: lower-alpha">
<li>the price is not worthwhile. Response: <em>lower</em> the <em>level</em> of the constraint.</li>
<li>the price is just right. Response: leave the <em>level</em> of the constraint along.</li>
<li>the price is well worthwhile. Response: <em>raise</em> the <em>level</em> of the constraint.</li>
</ol></li>
<li>Repeat the process by going back to step (iii) until either the price is just right or the level of the constraint is zero.</li>
</ol>
<p>Understanding (vi) is where your newly gained understanding of calculus comes in. Throughout CalcZ, we have encountered situations where we gradually build a solution by taking a series of <strong>Euler steps</strong>. You’ve seen this, for instance, in constructing the definite integral of a function or in finding a solution to a differential equation or by locating an argmax by taking small steps in the direction of the gradient vector. <span style="float: right; padding-left: 50px;"><a name="4990" href="#4990"><img src="www/icons8-signpost.png" title="Location: 4990" width="12px"/></a><span style="color: red; font-size: 6pt;">4990</red></span></p>
<p>Now, let’s examine a small but important part of the procedure for multi-objective optimization:</p>
<blockquote>
<ol style="list-style-type: lower-roman">
<li>You, the decision maker, select <em>one</em> of the objective functions to be <em>the</em> objective function. <strong>Mathematically, it doesn’t matter which one.</strong></li>
</ol>
</blockquote>
<p>Although we may think of objective functions and constraint functions as different kinds of things, the way they are used in constrained optimization gives them symmetrical roles.</p>
<p>In earlier exercises, we’ve looked at step (iii) in the multi-objective optimization procedure graphically, as in this diagram depicting as an objective function the <em>volume</em> of a cardboard box and depicting as a constraint the surface area of cardboard used in the box. <span style="float: right; padding-left: 50px;"><a name="4995" href="#4995"><img src="www/icons8-signpost.png" title="Location: 4995" width="12px"/></a><span style="color: red; font-size: 6pt;">4995</red></span></p>
<p><img src="MOSAIC-Calculus_files/figure-html/unnamed-chunk-30-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>The constraint path is the contour of the constraint function at which the output of the constraint function is the set level; here that’s 600 square-inches of cardboard.<br />
The argmax in this problem is the point at which the constraint path is tangent to a contour of the objective function. Here, we need to <strong>interpolate</strong> visually and imagine the contour where the objective function output is about 1100, which will be tangent to the constraint path at about <span class="math inline">\(x=4.2\)</span>. <span style="float: right; padding-left: 50px;"><a name="5000" href="#5000"><img src="www/icons8-signpost.png" title="Location: 5000" width="12px"/></a><span style="color: red; font-size: 6pt;">5000</red></span></p>
<p>Let’s take the graphic apart into it’s constituent components: the objective function and the constraint function. We’ll plot both in the same way: a contour plot with the gradient field superimposed.</p>
<p><img src="MOSAIC-Calculus_files/figure-html/unnamed-chunk-31-1.png" width="50%" style="display: block; margin: auto;" /><img src="MOSAIC-Calculus_files/figure-html/unnamed-chunk-31-2.png" width="50%" style="display: block; margin: auto;" /></p>
<p>As always, at any point the gradient vector is perpendicular to the contour through that point. This means that wherever the contour of one function is tangent to the contour of the other function, their respective gradient vectors are exactly aligned. <span style="float: right; padding-left: 50px;"><a name="5005" href="#5005"><img src="www/icons8-signpost.png" title="Location: 5005" width="12px"/></a><span style="color: red; font-size: 6pt;">5005</red></span></p>
<p>The next plot shows the gradient vectors of each function along with the <strong>angle</strong> (in degrees) between the gradient vectors at each point. Along the <strong>green line</strong>, the gradient vectors are exactly aligned. <span style="float: right; padding-left: 50px;"><a name="5010" href="#5010"><img src="www/icons8-signpost.png" title="Location: 5010" width="12px"/></a><span style="color: red; font-size: 6pt;">5010</red></span></p>
<p><img src="MOSAIC-Calculus_files/figure-html/unnamed-chunk-32-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Note that nowhere in the construction of the green line have we said anything about which of the two functions is the objective and which is the constraint. The two functions are used in exactly the same way: find the gradient and find the points where the two functions’ gradients are aligned. It doesn’t matter which function we choose to call the contraint and which the gradient. <span style="float: right; padding-left: 50px;"><a name="5015" href="#5015"><img src="www/icons8-signpost.png" title="Location: 5015" width="12px"/></a><span style="color: red; font-size: 6pt;">5015</red></span></p>
<p>Each point on the green line is an input <span class="math inline">\((x, y)\)</span> that is optimal at some level of the constraint. Imagine taking points on the green line and, for each point, calculating the box volume and the box surface area. These points are each on the <strong>Pareto frontier</strong> of the multi-objective optimization problem. That is, there are no values of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> off the green line that dominate a point on the green line in terms of the values of the box volume and the box area. <span style="float: right; padding-left: 50px;"><a name="5020" href="#5020"><img src="www/icons8-signpost.png" title="Location: 5020" width="12px"/></a><span style="color: red; font-size: 6pt;">5020</red></span></p>
<p><img src="MOSAIC-Calculus_files/figure-html/unnamed-chunk-33-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p><strong>Question H</strong> The two graphs showing the green line are labeled “Angle of alignment …” and “Pareto frontier …” respectively. The green line in both graphs represents the same set of <span class="math inline">\(x, y\)</span> points. But the graphs are different. Why?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">The domain in “Angle …” is the inputs <span class="math inline">\((x,y)\)</span> to the objective functions, whereas the domain in “Pareto …” is the outputs from those objective functions.<span class="mcanswer">Correct. </span></span><br />
</li>
<li><span class="Zchoice">The domain in “Pareto …” is the inputs <span class="math inline">\((x,y)\)</span> to the objective functions, whereas the domain in “Angle …” is the outputs from those objective functions.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The “Angle …” graph shows only the constraint function while the “Pareto …” graph shows only the objective function.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The “Angle …” graph shows only the constraint function while the “Pareto …” graph shows both the constraint and objective functions.<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question I</strong> Recall that the shadow price (a.k.a. Lagrange multiplier) is a ratio: the extent to which the output of the objective function is increased compared to the extent to which the constraint level is increased. Which of these numerical values is approximately the shadow price of volume with respect to area? (Hint: The above graph gives all the information you need!)</p>
<p>    <span class="Zchoice">2.4<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">24<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">240<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">2400<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question J</strong> What’s the shadow price of area with respect to volume? (Before we asked about volume with respect to area.)</p>
<p>    <span class="Zchoice">0.042<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">0.42<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">4.2<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">42<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question K</strong> We made a rookie error in posing the two previous questions. The shadow price is a <em>quantity</em> and we didn’t say what the <strong>units</strong> of that quantity are! So any of the candidate answers to those questions might be right depending on what unit you take the shadow price to be in. (You might have to make up your own unit for this to be exactly right.) We apologize for the mistake and will earnestly try to do better in the future! For now, we’ll ask you to figure it out: Given the units shown on the graph, in what units are the shadow price of volume with respect to area?</p>
<p>    <span class="Zchoice">inches<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">square-inches<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">cubic-inches<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">1/inches<span class="mcanswer">︎✘ </span></span></p>
<p><strong>An application to machine learning</strong>: Large chunks of the field of machine learning consist of relating some outcome to be predicted as a function inputs that can be measured. A discrete example: predict what animal is depicted in a photograph as a function of the million-or-so pixel values. A continuous example: Find the probability of a person getting a disease as a function of measurements of expression level of each of thousands of genes. <span style="float: right; padding-left: 50px;"><a name="5025" href="#5025"><img src="www/icons8-signpost.png" title="Location: 5025" width="12px"/></a><span style="color: red; font-size: 6pt;">5025</red></span></p>
<p>In both cases, a starting point is the collection of a large amount of data, e.g. photographs with various animals in them that have been labeled by some expert; or genetic measurements from people who did and did not come down with the disease. In both cases, the outcome of machine learning is a function that gives an output (which animal? came down with disease?) as a function of the inputs. <span style="float: right; padding-left: 50px;"><a name="5030" href="#5030"><img src="www/icons8-signpost.png" title="Location: 5030" width="12px"/></a><span style="color: red; font-size: 6pt;">5030</red></span></p>
<p>One objective in finding the function is to make the results as close as possible to the data: the function should give the right answer as often as possible. But there is another objective: keep the model simple. The optimal model choice involves a trade-off between these two objectives. Techniques for model construction in machine learning therefore involve two objective functions: the probability of a correct output and the complexity of the model (as measured, for instance, by the length of the <span class="math inline">\(\mathbf x\)</span> vector found when solving the linear combination target problem). In statistics, this is called the trade-off between <strong>variance</strong> (how close the model is to the data) and <strong>bias</strong> (how far the <span class="math inline">\(\mathbf x\)</span> vector is from the one we would get by ignoring the objective to keep the model as simple as possible). <span style="float: right; padding-left: 50px;"><a name="5035" href="#5035"><img src="www/icons8-signpost.png" title="Location: 5035" width="12px"/></a><span style="color: red; font-size: 6pt;">5035</red></span></p>
</div>
<div id="commensurate-and-incommensurate" class="section level2" number="3.8">
<h2><span class="header-section-number">29.8</span> Commensurate and incommensurate</h2>
<p>Just as the word “cooperate” means to “work together” (“co” + “operate”), the word “commensurate” means to “measure together” or to measure in the same way. Since you already know about different units and dimensions, an example in that domain can make the meaning concrete. An inch and a mile are commensurate quantities. Obviously, an inch and a mile are not equal, but you can <em>compare</em> them in an objective way. (An inch is 0.000015783 miles.) Similarly, a litre and a gallon are commensurate, but having the dimension L<sup>3</sup>, neither is commensurate with a quantity of dimension L.</p>
<p>A large number of decisions involve money in some way. It’s routine to decide whether a purchase is “worth the money.” But we do this by applying a judgment that is subjective, e.g. is it worthwhile to buy the more expensive chocolate? The decision involves comparing two <em>incommensurate</em> things: the money vs the good feelings that come from eating or giving a fine treat.</p>
<p>That things are incommensurate does not at all mean that you can’t make decisions that put one against the other, just that there is no ready, objective means to do the comparison.</p>
<p>As an example of how incommensurability can frustrate decision making … In the 1990s the Federal Aviation Administration (FAA) was considering a policy of requiring safety seats for infants and children on flying. (For infants, the standard was “babe in arms”: the infant could be carried on the plane and held by the caretaker, without needing a separate seat for the baby.) As you might expect, the issue was the extra costs for parents versus the increased safety of the child safety seat. The American College of Pediatrics lobbied in favor of the safety seats, travel agents lobbied against the requirement. The FAA could not reach a decision. That’s somewhat surprising because the FAA necessarily makes decisions that compare money and safety, for instance in the requirements for a passenger evacuation system or life rafts. I guess nobody is objective about babies!</p>
<p>After a decade or so, the FAA decided <em>not</em> to require the safety seats. What broke the log-jam of incommensurability was a study done of how parents would respond to the increase in cost of flying with babies. It was determined that the increased cost would push parents to drive rather than fly for short- or mid-distance trips. Driving is much more dangerous than commercial aviation and so the expected number of injuries or deaths would be larger were the safety-seat requirement instituted than if not. In other words, the comparison of lives to lives (driving risk versus flying risk) was easy, but the comparison of baby lives to money was impossible.</p>
<p>Over the next few classes, you will learn some mathematical techniques for decision-making in the face of incommensurate objectives (e.g. save money versus save lives). It’s important to note that there is no mathematical <em>solution</em> to the problem. Rather, mathematics can provide tools to clarify the trade-offs and, in much the same way as the resolution of the FAA’s policy problem, can sometimes offer a sensible way forward.</p>
<p>It’s worth mentioning some of the common, non-mathematical ways that people deal with incommensurates. I’ll call these “heuristics.” The <a href="https://en.wikipedia.org/wiki/Heuristic">Wikipedia definition of “heuristic”</a> is pretty good:</p>
<blockquote>
<p><em>[A]ny approach to problem solving … that employs a practical method that is not guaranteed to be optimal, perfect, or rational, but is nevertheless sufficient for reaching an immediate, short-term goal or approximation. Where finding an optimal solution is impossible or impractical, heuristic methods can be used to speed up the process of finding a satisfactory solution. Heuristics can be mental shortcuts that ease the cognitive load of making a decision.</em></p>
</blockquote>
<p>A very common heuristic is to simply deny that any trade-off exists. This is seen most clearly in the dispute about climate change. The trade-off here is the cost of climate remediation policies (such as a carbon tax) versus the disruption and dislocation caused by the changing climate. One one side of the debate are people who deny that climate change is happening or that it is caused by human activity that can be mitigated. On the other side of the debate are people who insist that the economic changes called for will not only reduce climate-change harm but will positively affect the economy, create jobs, etc. The rest of us are in the middle, recognizing both sides of the problem.</p>
<p>Another heuristic is to play the trump cards of morality and human rights. Once someone claims the the issue is fundamentally one of morality, it’s hard to have conversation about the trade-offs involved. (If everyone agreed about morality, it would be easier. But one person’s divine truth is another person’s opinion.) In the US, the debate about health-care policy is not a measured discussion of how available resources should be distributed to best effect but a competition between perceived moral or ethical stances: “the government has no business making medical decisions for me” versus “affordable health care is a human right.”</p>
<p>It is not our place in CalcZ to enter into deep conversation about political or moral philosophy. Rather, by introducing the concepts of incommensurability and heuristic, we intend to guide the mathematical discussion toward a framework for making impossible decisions in a thoughtful and responsible manner.</p>
</div>
<div id="multiple-objectives-1" class="section level2" number="3.9">
<h2><span class="header-section-number">29.9</span> Multiple objectives</h2>
<p>It often happens that decisions involve multiple simultaneous objectives. In one context or another, each of these considerations can play a role in decision making:</p>
<ul>
<li>safety</li>
<li>cost</li>
<li>human life</li>
<li>animal welfare</li>
<li>collateral damage</li>
<li>public or political reaction</li>
</ul>
<p>This is by no means an exclusive list.</p>
<p>In specialized domains more specific competing objectives are often part of the design goal. For instance, consider aircraft design:</p>
<ul>
<li>range</li>
<li>payload or cargo capacity</li>
<li>short take-off and landing</li>
<li>maneuverability</li>
<li>mission suitability</li>
<li>multi-mission capability</li>
<li>maintenability</li>
<li>stealth</li>
</ul>
<p>Over the next few lessons, we’re going to introduce concepts that are important to effective thinking about designing with multiple objectives as well as mathematical tools that help in balancing conflicting objectives. As you will see, there is no single “correct” or “best” solution to such problems. Indeed, there is a mathematical theorem about when there <strong>cannot</strong> be a best solution. However—and this may seem contractictory at first—some solutions are better than others. Mathematics also provides a framework for a systematic and documentable process which provides a role for the inevitable elements of human, subjective values.</p>
<p>First, we’ll cover elementary mathematical principles that demonstrate both that there is no single “best” solution while yet allowing some solutions to be better than others. Important vocabulary here includes <strong>“incommensuate”</strong>, <strong>dominating</strong> and <strong>non-dominating</strong> solutions(along with <strong>pareto optimality</strong>), <strong>decision frontier</strong>, and <strong>social utility function</strong>.</p>
<p>Second, we’ll briefly discuss some <strong>heuristics</strong> that people and groups often use, without necessarily realizing it, in solving multi-objective optimization problems. Awareness of such heuristics helps in identifying (often unstated) objectives implicit in the decision and enables you, by making them <strong>explicit</strong>, to clarify the problem and potentially open it up to useful discussion and <strong>negotiation</strong>.</p>
<p>Later, we’ll use the mathematics of <strong>constraints</strong> and <strong>constraint functions</strong> to support a process of rational decision making that nonetheless leaves space for subjectivity in valuing outcomes.</p>
</div>
<div id="yours-and-mine" class="section level2" number="3.10">
<h2><span class="header-section-number">29.10</span> Yours and mine</h2>
<p>We start with a simple, everyday situation that illustrates many basic principles. Here’s a heads up: People are so adept at applying heuristics to this sort of problem—perhaps because it is so common—that it can be difficult at first to see that there is actually a difficulty involved.</p>
<p>The situation is this: there is a pot of money that you and I are going to split up. You and I have similar objectives. For each of us, getting more money is better than getting less. And our objectives conflict. If you get more, I get less. The concepts we’ll introduce apply equally well when there are three, four, or any number of people splitting the pot.</p>
<p>For simplicity and for generalizability to other, less obvious situations, we’ll imagine that we need to choose between several discrete <strong>policy alternatives</strong>, that is, configurations of the split. “Policy” may seem like a high-fallutin word to use for splitting the pot, but in other situations it can be exactly the right word. Moreover, the etymology of the word is right on target for the problem. A contemporary dictionary definition of “policy” is:</p>
<blockquote>
<p><em>Policy: a course or principle of action adopted or proposed by a government, party, business, or individual</em></p>
</blockquote>
<p>The root of the word is “city” in Greek, “polis” (πόλις—you can recognize the <span class="math inline">\(\pi\)</span> at the beginning of the word and the “lambda” (<span class="math inline">\(\lambda\)</span>) in the middle. The last letter is “sigma” (<span class="math inline">\(\sigma\)</span>) although you might not recognize it since a somewhat different form is used when the letter is at the end of a word.) From “polis” comes our words “politics,” “policy,” and “police,” all of which have to do with relations among people.</p>
<p>For reference, here is a graph showing some policy alternatives in the yours-and-mine problem.</p>
<p><img src="MOSAIC-Calculus_files/figure-html/unnamed-chunk-34-1.png" width="90%" style="display: block; margin: auto;" />
For example, in policy alternative A, I would get $50 and you would get $25. Under policy F, I get $38 and you get $47. (We’ll get to the blue line in a bit.)</p>
<p>A <strong>dominated solution</strong> is one which both you and I would turn down in favor of a specific alternative (called the <strong>dominating solution</strong>). For instance, C dominates G: we’re both better off under C than G.</p>
<p><strong>Question L</strong> Which solution dominates F?</p>
<p>    <span class="Zchoice">A<span class="mcanswer">︎✘ I would be better off under A, but you would be worse off than under F.</span></span>       <span class="Zchoice">B<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">C<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">D<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">E<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question M</strong> Which solutions dominate G?</p>
<p>    <span class="Zchoice">BCDF<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">CDF<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">ACD<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">CB<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question N</strong> Which solutions dominate E?</p>
<p>    <span class="Zchoice">C<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">CDF<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">CD<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">None<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span></p>
<p><strong>Question O</strong> Which solutions dominate B?</p>
<p>    <span class="Zchoice">C<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">CDF<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">CD<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">None<span class="mcanswer">︎✘ </span></span></p>
<p>A mathematical, but not psychological, principle is that a dominated solution is never optimal. So, we can rule out any dominated solution.</p>
<p><strong>Question P</strong> Which solutions can be ruled out as dominated by some other solution?</p>
<p>    <span class="Zchoice">BFG<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">BG<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">ABFG<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">AFG<span class="mcanswer">︎✘ </span></span></p>
<p>An important <strong>heuristic</strong> for making a decision is <em>fairness</em>. In this case, fairness might be interpreted as “split the pot as evenly as possible.”</p>
<p>The diagonal line shows exactly even splits: you and I each get the same amount. There is no policy alternative that is exactly even, but D is the closest. So many people will claim that D is the best of all the policy alternatives, that other alternatives are “greedy” or “unethical.”</p>
<p>Fairness is a very attractive property of a selected policy solution, but it’s relatively easy to see that fairness is not essential.</p>
<p><strong>Question Q</strong> Suppose that policy alternative D does not exist. Of the other policy alternatives, which is the fairest?</p>
<p>    <span class="Zchoice">A<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">C<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">F<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span></p>
<p><strong>Question R</strong> Suppose that policy alternative D does not exist. Does any policy alternative dominate the fairest solution?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">Yes, A<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Yes, C<span class="mcanswer">Excellent! So we both would prefer C to F. That means that F is not the optimal solution for either of us.</span></span><br />
</li>
<li><span class="Zchoice">No<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>The answers to the previous two questions point to the reasoning behind calling “fairness” a heuristic rather than a coherent basis for policy choice. To make fairness coherent, we would have to change the rule, “Be fair!” to one like, “If there’s a fairer, non-dominated solution, go for that.”</p>
<p>Another heuristic is can be applied if it’s possible to average between policy alternatives. Imagine if we were making the decision not just for one payout, but for many payouts in series. We might agree to pick solution D most of the time but every once in a while pick solution A to let me catch up with you.</p>
<p>The blue line shows the non-dominated solutions when such averaging is available. This set of non-dominated solutions is sometimes called the <strong>solution frontier</strong>. Notice that solution E, which is not dominated by any other solution, is dominated by an average between A and F.</p>
<p>Still other heuristics are available. Under <strong>compensation</strong>, we could agree to a choice that enables one of us to pay the other in order to balance out the take. The trajectory of a compensatory solution is along the lines of slope -1 from the non-dominated solutions.</p>
<p><strong>Question S</strong> One of the following is the best solution when compensation is possible. Which one?</p>
<p>    <span class="Zchoice">A<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">C<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span>Since both parties will walk away with more money than D</span></span>       <span class="Zchoice">D<span class="mcanswer">︎✘ </span></span></p>
<p>In some settings, for instance the “economic theory of law,” the best solution under compensation is also the right choice <em>even if compensation is not paid</em>.</p>
</div>
<div id="follow-the-gradient" class="section level2" number="3.11">
<h2><span class="header-section-number">29.11</span> Follow the gradient!</h2>
<p>The big contribution of calculus to the process of optimization is the <strong>gradient vector</strong>. The gradient vector, as you know, points in the steepest direction uphill. Since functions can have complicated shapes, the gradient does not generally point directly to the maximum. However, if you start at a point and take a small step in the direction of the gradient, the value of the objective function will increase. Then repeat the process and keep repeating until the gradient has zero length (or close to zero).</p>
<p>The sandbox has instructions in R for</p>
<ol style="list-style-type: lower-roman">
<li>generating a function <span class="math inline">\(f(x, y)\)</span></li>
<li>finding the <span class="math inline">\(x\)</span>- and <span class="math inline">\(y\)</span>-components of the gradient vector</li>
<li>setting up differential equations whose dynamics are “velocity is the gradient.” (Remember, velocity is a vector, as is the gradient.) This system just walks uphill.</li>
<li>setting up differential equations whose dynamics are “velocity is negative the gradient.”</li>
<li>plotting the <span class="math inline">\(f(x,y)\)</span>, the gradient field, and the two solutions to the differential equations.</li>
</ol>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="constraints-and-optimization.html#cb36-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;&lt;-</span> <span class="fu">rfun</span>( <span class="sc">~</span> x <span class="sc">+</span> y, <span class="at">seed=</span><span class="dv">103</span>)</span>
<span id="cb36-2"><a href="constraints-and-optimization.html#cb36-2" aria-hidden="true" tabindex="-1"></a>dx_f <span class="ot">&lt;&lt;-</span> <span class="fu">D</span>(<span class="fu">f</span>(x, y) <span class="sc">~</span> x)</span>
<span id="cb36-3"><a href="constraints-and-optimization.html#cb36-3" aria-hidden="true" tabindex="-1"></a>dy_f <span class="ot">&lt;&lt;-</span> <span class="fu">D</span>(<span class="fu">f</span>(x, y) <span class="sc">~</span> y)</span>
<span id="cb36-4"><a href="constraints-and-optimization.html#cb36-4" aria-hidden="true" tabindex="-1"></a>soln1 <span class="ot">&lt;-</span> <span class="fu">integrateODE</span>(dx <span class="sc">~</span> <span class="fu">dx_f</span>(<span class="at">x=</span>x, <span class="at">y=</span>y), </span>
<span id="cb36-5"><a href="constraints-and-optimization.html#cb36-5" aria-hidden="true" tabindex="-1"></a>                     dy <span class="sc">~</span> <span class="fu">dy_f</span>(<span class="at">x=</span>x, <span class="at">y=</span>y), </span>
<span id="cb36-6"><a href="constraints-and-optimization.html#cb36-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="sc">-</span><span class="dv">3</span>,</span>
<span id="cb36-7"><a href="constraints-and-optimization.html#cb36-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">tdur =</span> <span class="fu">list</span>(<span class="at">from=</span><span class="dv">0</span>, <span class="at">to=</span><span class="dv">10</span>, <span class="at">dt=</span><span class="fl">0.1</span>))</span>
<span id="cb36-8"><a href="constraints-and-optimization.html#cb36-8" aria-hidden="true" tabindex="-1"></a>soln2 <span class="ot">&lt;-</span> <span class="fu">integrateODE</span>(dx <span class="sc">~</span> <span class="sc">-</span><span class="fu">dx_f</span>(<span class="at">x=</span>x, <span class="at">y=</span>y), </span>
<span id="cb36-9"><a href="constraints-and-optimization.html#cb36-9" aria-hidden="true" tabindex="-1"></a>                     dy <span class="sc">~</span> <span class="sc">-</span><span class="fu">dy_f</span>(<span class="at">x=</span>x, <span class="at">y=</span>y), </span>
<span id="cb36-10"><a href="constraints-and-optimization.html#cb36-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">x =</span> <span class="sc">-</span><span class="dv">2</span>, <span class="at">y =</span> <span class="fl">0.75</span>,</span>
<span id="cb36-11"><a href="constraints-and-optimization.html#cb36-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">tdur =</span> <span class="fu">list</span>(<span class="at">from=</span><span class="dv">0</span>, <span class="at">to=</span><span class="dv">10</span>, <span class="at">dt=</span><span class="fl">0.1</span>))</span>
<span id="cb36-12"><a href="constraints-and-optimization.html#cb36-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-13"><a href="constraints-and-optimization.html#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="constraints-and-optimization.html#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(<span class="fu">f</span>(x, y) <span class="sc">~</span> x <span class="sc">+</span> y, <span class="fu">domain</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>), <span class="at">y=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb36-15"><a href="constraints-and-optimization.html#cb36-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gradient_plot</span>(<span class="fu">f</span>(x, y) <span class="sc">~</span> x <span class="sc">+</span> y) <span class="sc">%&gt;%</span></span>
<span id="cb36-16"><a href="constraints-and-optimization.html#cb36-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">traj_plot</span>(<span class="fu">y</span>(t) <span class="sc">~</span> <span class="fu">x</span>(t), soln1, <span class="at">color=</span><span class="st">&quot;dodgerblue&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-17"><a href="constraints-and-optimization.html#cb36-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">traj_plot</span>(<span class="fu">y</span>(t) <span class="sc">~</span> <span class="fu">x</span>(t), soln2, <span class="at">color=</span><span class="st">&quot;orange3&quot;</span>)</span></code></pre></div>
<p><img src="MOSAIC-Calculus_files/figure-html/fg2-1-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p><strong>Question T</strong> The two trajectories are shown in blue and red respectively. Each starts at the point labelled “0” and ends at the point labelled “10”. How does movement along each trajectory correspond to the gradient field?</p>
<p>    <span class="Zchoice">red uphill, blue downhill<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">red downhill, blue uphill<span class="mcanswer"><span class="math inline">\(\heartsuit\ \)</span></span></span>       <span class="Zchoice">both downhill<span class="mcanswer">︎✘ </span></span>       <span class="Zchoice">both uphill<span class="mcanswer">︎✘ </span></span></p>
<p><strong>Question U</strong> Did the trajectories reach a local maximum or minimum?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">red reached max, blue reached min<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">red reached min, blue reached max<span class="mcanswer">Excellent! </span></span><br />
</li>
<li><span class="Zchoice">both reached max<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">both reached min<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question V</strong> There’s a local minimum shown on the graph at about <span class="math inline">\((x=0, y=-1)\)</span>. Neither of the trajectories reached this minimum. Imagine starting a new trajectory at a point <span class="math inline">\((x=2, y=0)\)</span>. Will it reach the local minimum near <span class="math inline">\((x=0, y=-1)\)</span>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">Yes, so long as you walk <strong>against</strong> the gradient.<span class="mcanswer">Nice! </span></span><br />
</li>
<li><span class="Zchoice">Yes, so long as you walk <strong>along</strong> the gradient.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">No<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p>In the code originally in the sandbox, the trajectory was constructed with 100 Euler steps; the time interval runs from <span class="math inline">\(t=0\)</span> to <span class="math inline">\(t=10\)</span> and <span class="math inline">\(dt = 0.1\)</span>. Practical optimization algorithms are designed to take steps that are as large as feasible. But if the steps are too large, the trajectory can overshoot the target. Dealing with this problem is a major feature of optimization algorithms and is non-trivial.</p>
<p>Purely to illustrate, we can investigate stepsize by changing <code>dt</code> in the two <code>integrateODE()</code> expressions.</p>
<p><strong>Question W</strong> What happens when you set <code>dt=1.0</code>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">Both trajectories smoothly curve around and reach the maximum or minimum.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The trajectories reach the maximum or minimum, but in a clunky, jerkwise fashion.<span class="mcanswer">Correct. </span></span><br />
</li>
<li><span class="Zchoice">The trajectories oscillate around the maximum or minimum without settling down.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Everything falls apart and the trajectories leave the domain of interest.<span class="mcanswer">︎✘ </span></span></li>
</ol>
<p><strong>Question X</strong> What happens when you set <code>dt=10.0</code>?</p>
<ol style="list-style-type: lower-roman">
<li><span class="Zchoice">Both trajectories smoothly curve around and reach the maximum or minimum.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The trajectories reach the maximum or minimum, but in a clunky, jerkwise fashion.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">The trajectories oscillate around the maximum or minimum without settling down.<span class="mcanswer">︎✘ </span></span><br />
</li>
<li><span class="Zchoice">Everything falls apart and the trajectories leave the domain of interest.<span class="mcanswer">Excellent! </span></span></li>
</ol>
<div id="more-about-qalys-exercise" class="section level3" number="3.11.1">
<h3><span class="header-section-number">29.11.1</span> More about QALY’s: Exercise??</h3>
<p>The optimization techniques described above are completely realistic, but it’s not so realistic to have specific formulas for the relationship between expenditures and outcomes. Somewhat more realistically, you might have the opinions of experts about the outcomes, in the form of a table like this.</p>
<table>
<thead>
<tr class="header">
<th align="left">Expenditure</th>
<th align="right">0</th>
<th align="right">10</th>
<th align="right">20</th>
<th align="right">30</th>
<th align="right">40</th>
<th align="right">50</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">10</td>
<td align="right">15</td>
<td align="right">18</td>
<td align="right">24</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">8</td>
<td align="right">19</td>
<td align="right">25</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="left">C</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">12</td>
<td align="right">18</td>
<td align="right">26</td>
<td align="right">31</td>
</tr>
</tbody>
</table>
<p>Such estimates from experts should be taken with a grain of salt, but they are often the best information you have to inform a model.</p>
<p>You can turn the expert’s opinions into functions by using splines. In this case, there is good reason to think that output will increase monotonically with expenditure, so a monotonic spline is a good choice. You can construct the functions like this:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="constraints-and-optimization.html#cb37-1" aria-hidden="true" tabindex="-1"></a>expend<span class="ot">=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">40</span>,<span class="dv">50</span>)</span>
<span id="cb37-2"><a href="constraints-and-optimization.html#cb37-2" aria-hidden="true" tabindex="-1"></a>A <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">18</span>,<span class="dv">24</span>)</span>
<span id="cb37-3"><a href="constraints-and-optimization.html#cb37-3" aria-hidden="true" tabindex="-1"></a>B <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">8</span>,<span class="dv">19</span>,<span class="dv">25</span>,<span class="dv">30</span>)</span>
<span id="cb37-4"><a href="constraints-and-optimization.html#cb37-4" aria-hidden="true" tabindex="-1"></a>C <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>,<span class="dv">26</span>,<span class="dv">31</span>)</span>
<span id="cb37-5"><a href="constraints-and-optimization.html#cb37-5" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">expend=</span>expend,<span class="at">A=</span>A,<span class="at">B=</span>B,<span class="at">C=</span>C)</span>
<span id="cb37-6"><a href="constraints-and-optimization.html#cb37-6" aria-hidden="true" tabindex="-1"></a>fA <span class="ot">=</span> <span class="fu">spliner</span>( A <span class="sc">~</span> expend, <span class="at">data=</span>dat, <span class="at">monotonic=</span><span class="cn">TRUE</span>)</span>
<span id="cb37-7"><a href="constraints-and-optimization.html#cb37-7" aria-hidden="true" tabindex="-1"></a>fB <span class="ot">=</span> <span class="fu">spliner</span>( B <span class="sc">~</span> expend, <span class="at">data=</span>dat, <span class="at">monotonic=</span><span class="cn">TRUE</span>)</span>
<span id="cb37-8"><a href="constraints-and-optimization.html#cb37-8" aria-hidden="true" tabindex="-1"></a>fC <span class="ot">=</span> <span class="fu">spliner</span>( C <span class="sc">~</span> expend, <span class="at">data=</span>dat, <span class="at">monotonic=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<ol>
<li>Find the best values of inputs <span class="math inline">\(x_A\)</span>, <span class="math inline">\(x_B\)</span>, and <span class="math inline">\(x_C\)</span> given the constraint that total expenditure is <span class="math inline">\(x_A + x_B + x_C = 50\)</span>.
Choose the closest answer:
a. Input to A: <span class="math inline">\(x_A\)</span> {0}{0,5,10,15,21,24,30,34,39,43,50}
#. Input to B: <span class="math inline">\(x_B\)</span> {34}{6,11,16,19,25,29,34,41,43,50}
#. Input to C: <span class="math inline">\(x_C\)</span> {16}{7,11,16,19,21,25,29,34,39,41,44}</li>
</ol>
<!--begin-answer-->
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="constraints-and-optimization.html#cb38-1" aria-hidden="true" tabindex="-1"></a>overall <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(<span class="fu">fA</span>(A) <span class="sc">+</span> <span class="fu">fB</span>(B) <span class="sc">+</span> <span class="fu">fC</span>(<span class="dv">50</span><span class="sc">-</span>A<span class="sc">-</span>B)  <span class="sc">~</span> A <span class="sc">&amp;</span>  B)</span>
<span id="cb38-2"><a href="constraints-and-optimization.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>( </span>
<span id="cb38-3"><a href="constraints-and-optimization.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">overall</span>(A,  B) <span class="sc">~</span> A  <span class="sc">+</span> B,</span>
<span id="cb38-4"><a href="constraints-and-optimization.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">domain</span>(<span class="at">A=</span><span class="fu">range</span>(<span class="dv">0</span>,<span class="dv">50</span>), <span class="at">B=</span><span class="fu">range</span>(<span class="dv">0</span>,<span class="dv">50</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb38-5"><a href="constraints-and-optimization.html#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_labs</span>(<span class="at">x =</span> <span class="st">&quot;A (amount)&quot;</span>, <span class="at">y  =</span> <span class="st">&quot;B (amount)&quot;</span>)</span></code></pre></div>
<p><img src="MOSAIC-Calculus_files/figure-html/splineans-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>The optimum is near <span class="math inline">\(x_A=0\)</span>, <span class="math inline">\(x_B=34\)</span> and therefore <span class="math inline">\(x_C = 50 - 34 - 0 = 16\)</span>. This gives an output of about 31.4 units.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="constraints-and-optimization.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">overall</span>( <span class="at">A=</span><span class="dv">0</span>, <span class="at">B=</span><span class="dv">34</span> )</span></code></pre></div>
<pre><code>## [1] 31.408</code></pre>
<!--end-answer-->
<p>The American Association of Allergy Activists (AAAA) has lobbied Congress to mandate that, of the 50 units of available funds, funding for A must be at least <span class="math inline">\(x_A \geq 30\)</span> with only the remaining 20 units of expenditure available to be allocated to B and C.</p>
<ol>
<li>How much would this constraint reduce the overall output for the three interventions combined? (Remember, if you’re spending 30 on A, you can’t spend more than 20 on B.)
<ol>
<li>Not at all.</li>
<li>About zero to 1 output unit</li>
<li><em>About 4 to 5 output units</em></li>
<li>About 10 to 12 output units</li>
<li>About 14 to 16 output units</li>
<li>It would actually <strong>increase</strong> the output.</li>
</ol></li>
</ol>
<!--begin-answer-->
<pre><code> Looking at the contour plot along the path $x_A = 30$ indicates that the best possible outcome will be about 28 units.  This is a reduction of about 3 units from the optimum when $x_A$ is not subject to the proposed Congressional constraint.</code></pre>
<!--end-answer-->
<p>Good news and bad news. You’ve defeated the AAAA initiative to force expenditure on A. But, regretably, general budget cuts have just been announced! Now there are only 20 units to spend on the three interventions.</p>
<ol>
<li>What’s the best mixture?
<ol style="list-style-type: lower-alpha">
<li>Input to A: <span class="math inline">\(x_A\)</span> {0}{0,5,10,15,20}</li>
<li>Input to B: <span class="math inline">\(x_B\)</span> {0}{0,5,10,15,20}</li>
<li>Input to C: <span class="math inline">\(x_C\)</span></li>
</ol></li>
<li>What’s the output that corresponds to the best mixture? {12}{0,3,6,8,12,14,21,29,34,38}
<!--begin-answer-->
The contour plot shows that the maximum occurs when <span class="math inline">\(x_A=0\)</span> and <span class="math inline">\(x_B = 0\)</span>.</li>
</ol>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="constraints-and-optimization.html#cb42-1" aria-hidden="true" tabindex="-1"></a>overall <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(<span class="fu">fA</span>(xA) <span class="sc">+</span> <span class="fu">fB</span>(xB) <span class="sc">+</span> <span class="fu">fC</span>(<span class="dv">20</span><span class="sc">-</span>(xA<span class="sc">+</span>xB))<span class="sc">~</span>xA<span class="sc">&amp;</span>xB) </span>
<span id="cb42-2"><a href="constraints-and-optimization.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">contour_plot</span>(<span class="fu">overall</span>(xA,  xB) <span class="sc">~</span> xA <span class="sc">+</span> xB,  </span>
<span id="cb42-3"><a href="constraints-and-optimization.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">domain</span>(<span class="at">xA=</span><span class="fu">range</span>(<span class="dv">0</span>,<span class="dv">20</span>), <span class="at">xB=</span><span class="fu">range</span>(<span class="dv">0</span>,<span class="dv">20</span>)))</span></code></pre></div>
<p><img src="MOSAIC-Calculus_files/figure-html/new20-1.png" width="90%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="constraints-and-optimization.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">overall</span>( <span class="at">xA=</span><span class="dv">0</span>, <span class="at">xB=</span><span class="dv">0</span> )</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<!--end-answer-->

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-driven-functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="future-value.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dtkaplan/MOSAIC-Calculus/shared/B4-constraints-and-optimization.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/dtkaplan/MOSAIC-Calculus/shared/B4-constraints-and-optimization.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
