<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 13 Piecewise functions | CalcZ Student Notes</title>
<meta name="author" content="Daniel Kaplan">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.8/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.4/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script><script type="text/x-mathjax-config">
    const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
    for (let popover of popovers){
      const div = document.createElement('div');
      div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
      div.innerHTML = popover.getAttribute('data-content');
      
      // Will this work with TeX on its own line?
      var has_math = div.querySelector("span.math");
      if (has_math) {
        document.body.appendChild(div);
      	MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
      	MathJax.Hub.Queue(function(){
          popover.setAttribute('data-content', div.innerHTML);
      	})
      }
    }
    </script>
</head>
<body>
<span class="math inline">
    \(\newcommand{\line}{\text{line}}
    \newcommand{\hump}{\text{hump}}
    \newcommand{\sigmoid}{\text{sigmoid}}
    \newcommand{\recip}{\text{recip}}
    \newcommand{\diff}[1]{{\cal D}_#1}
    \newcommand{\pnorm}{\text{pnorm}}
    \newcommand{\dnorm}{\text{dnorm}}\)
    </span>

    <!-- see https://www.homepages.ucl.ac.uk/~ucahmto/elearning/2019/09/14/bookdown.html-->
    <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="CalcZ-style.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">CalcZ Student Notes</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome to calculus</a></li>
<li class="book-part">Block 1: Functions and quantity</li>
<li><a class="" href="change.html"><span class="header-section-number">1</span> Change</a></li>
<li><a class="" href="pattern-book.html"><span class="header-section-number">2</span> Functions for modeling</a></li>
<li><a class="" href="structure-of-a-function.html"><span class="header-section-number">3</span> Structure of a function</a></li>
<li><a class="" href="fun-describing.html"><span class="header-section-number">4</span> Describing functions</a></li>
<li><a class="" href="fun-notation.html"><span class="header-section-number">5</span> Notation for functions</a></li>
<li><a class="" href="graphs-and-graphics.html"><span class="header-section-number">6</span> Graphics &amp; function graphs</a></li>
<li><a class="" href="params-intro.html"><span class="header-section-number">7</span> Parameters for functions</a></li>
<li><a class="" href="process-of-modeling.html"><span class="header-section-number">8</span> Process of modeling</a></li>
<li><a class="" href="fun-slopes.html"><span class="header-section-number">9</span> Slope function</a></li>
<li><a class="" href="function-inverses-and-solving.html"><span class="header-section-number">10</span> Function inverses and “solving”</a></li>
<li><a class="" href="fun-assembling.html"><span class="header-section-number">11</span> Assembling functions</a></li>
<li><a class="" href="fun-multiple-inputs.html"><span class="header-section-number">12</span> Functions with multiple inputs</a></li>
<li><a class="active" href="fun-piecewise.html"><span class="header-section-number">13</span> Piecewise functions</a></li>
<li><a class="" href="modeling-cycle.html"><span class="header-section-number">14</span> Modeling cycle</a></li>
<li><a class="" href="magnitudes.html"><span class="header-section-number">15</span> Magnitudes</a></li>
<li><a class="" href="dimensions.html"><span class="header-section-number">16</span> Dimensions</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="Not%20available">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="fun-piecewise" class="section level1" number="13">
<h1>
<span class="header-section-number">13</span> Piecewise functions<a class="anchor" aria-label="anchor" href="#fun-piecewise"><i class="fas fa-link"></i></a>
</h1>
<div class="objectives">
<ol>
<li>
<strong>[Fun-4-b-4a]</strong> <em>Identify graphs of a piecewise linear function.</em>
</li>
<li>
<strong>[Fun-1C-d]</strong> <em>Construct a hock-stick function by piecewise combination of a constant function and a straight-line function with non-zero slope.</em>
</li>
<li>
<strong>[Fun-4-b-4b]</strong> <em>Recognize traditional curly-brace notation for piecewise functions.</em>
</li>
<li>
<strong>[Fun-4-b-4c]</strong> <em>Be able to create a piecewise function in R.</em>
</li>
<li>
<strong>[Fun-4-b-4d]</strong> <em>Distinguish between continuous and discontinuous functions</em>
</li>
</ol>
</div>
<p>Each of our basic modeling functions, with two exceptions, has a domain that is the entire number line <span class="math inline">\(-\infty &lt; x &lt; \infty\)</span>. No matter how big or small is the value of the input, the function has an output. Such functions are particularly nice to work with, since we never have to worry about the input going out of bounds. <span style="float: right; padding-left: 50px;"><a name="1500" href="#1500"><img src="www/icons8-signpost.png" title="Location: 1500" width="12px"></a><span style="color: red; font-size: 6pt;">1500</span></span></p>
<p>The two exceptions are:</p>
<ol style="list-style-type: decimal">
<li>the logarithm function, which is defined only for <span class="math inline">\(0 &lt; x\)</span>.</li>
<li>some of the power-law functions: <span class="math inline">\(x^p\)</span>.
<ul>
<li>When <span class="math inline">\(p\)</span> is negative, the output of the function is undefined when <span class="math inline">\(x=0\)</span>. You can see why with a simple example: <span class="math inline">\(g(x) \equiv x^{-2}\)</span>. Most students had it drilled into them that “division by zero is illegal,” and <span class="math inline">\(g(0) = \frac{1}{0} \frac{1}{0}\)</span>, a double law breaker.</li>
<li>When <span class="math inline">\(p\)</span> is not an integer, that is <span class="math inline">\(p \neq 1, 2, 3, \cdots\)</span> the domain of the power-law function does not include negative inputs. To see why, consider the function <span class="math inline">\(h(x) \equiv x^{1/3}\)</span>.</li>
</ul>
</li>
</ol>
<p>It can be tedious to make sure that you are on the right side of the law when dealing with functions whose domain is not the whole number line. The designers of the hardware that does computer arithmetic, after several decades of work, found a clever system to make it easier. It’s a standard part of such hardware that whenever a function is handed an input that is not part of that function’s domain, one of two special “numbers” is returned. To illustrate:</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">^</span><span class="fl">0.9999</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">1</span><span class="op">/</span><span class="fl">0</span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<p><code>NaN</code> stands for “not a number.” Just about any calculation involving <code>NaN</code> will generate <code>NaN</code> as a result, even those involving multiplication by zero or cancellation by subtraction or division.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;One that does produce a number is &lt;code&gt;NaN^0&lt;/code&gt;.&lt;/p&gt;"><sup>15</sup></a> For instance:</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">0</span> <span class="op">*</span> <span class="cn">NaN</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="cn">NaN</span> <span class="op">-</span> <span class="cn">NaN</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="cn">NaN</span> <span class="op">/</span> <span class="cn">NaN</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<p>Division by zero produces <code>Inf</code>, whose name is reminiscent of “infinity.” <code>Inf</code> infiltrates any calculation in which it takes part: <span style="float: right; padding-left: 50px;"><a name="1510" href="#1510"><img src="www/icons8-signpost.png" title="Location: 1510" width="12px"></a><span style="color: red; font-size: 6pt;">1510</span></span></p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">3</span> <span class="op">*</span> <span class="cn">Inf</span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="cn">Inf</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">0</span> <span class="op">*</span> <span class="cn">Inf</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="cn">Inf</span> <span class="op">+</span> <span class="cn">Inf</span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="cn">Inf</span> <span class="op">-</span> <span class="cn">Inf</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">1</span><span class="op">/</span><span class="cn">Inf</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="scaffolding">
<p>To see the benefits of the <code>NaN</code> / <code>Inf</code> system let’s plot out the logarithm function over the graphics domain <span class="math inline">\(-5 \leq x \leq 5\)</span>. Of course, part of that graphics domain, <span class="math inline">\(-5 \leq x \leq 0\)</span> is not in the domain of the logarithm function and the computer is entitled to give us a slap on the wrists. The <code>NaN</code> provides some room for politeness.</p>
<p>Open a sandbox and see what happens when you make the plot.</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">slice_plot</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span>, <span class="fu">domain</span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<p>In a purely mathematical sense, the problem with functions being undefined over an extended part of a domain has been handled with cunning and imagination. But the solution—the invention of complex numbers—is not our concern here. Instead, we’re going to embrace functions that have a domain smaller than the whole number line and see what we can do with them.</p>
<p>To illustrate, let’s use computer notation to create a function whose domain is <span class="math inline">\(x &lt; 1\)</span>. To do this, we need a way to write “if,” as in, “If <span class="math inline">\(x\)</span> is 1 or greater, return <code>NaN</code>.” We’ll use a function in R that let’s us ask a TRUE/FALSE question and, depending on the answer, do one or another calculation. The question-answering R function is <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> whose name is remarkably descriptive. The <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> function takes three arguments. The first is the question to be asked, the second is the value to return if the answer is “yes,” and the third is the value to return for a “no” answer.</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">1</span>, <span class="va">x</span>, <span class="cn">NaN</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span>
<span class="fu">slice_plot</span><span class="op">(</span><span class="fu">g</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span>, <span class="fu">domain</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="CalcZ-notes_files/figure-html/unnamed-chunk-65-1.png" width="90%" style="display: block; margin: auto;">
What takes getting used to here is the expression <code>x &lt; 1</code> which is a <strong><em>question</em></strong> not a statement of fact. There’s no standard traditional mathematical notation for questions, although some people use a question mark as in <span class="math inline">\(x \stackrel{?}{&lt;} 1\)</span>.</p>
<p>The table shows computer notation for some common sorts of questions. <span style="float: right; padding-left: 50px;"><a name="1520" href="#1520"><img src="www/icons8-signpost.png" title="Location: 1520" width="12px"></a><span style="color: red; font-size: 6pt;">1520</span></span></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>R notation</th>
<th>English</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>x &gt; 2</code></td>
<td>“Is <span class="math inline">\(x\)</span> greater than 2?”</td>
</tr>
<tr class="even">
<td><code>y &gt;= 3</code></td>
<td>“Is <span class="math inline">\(y\)</span> greater than or equal to 3?”</td>
</tr>
<tr class="odd">
<td><code>x == 4</code></td>
<td>“Is <span class="math inline">\(x\)</span> exactly 4?”</td>
</tr>
<tr class="even">
<td><code>2 &lt; x &amp; x &lt; 5</code></td>
<td>“Is <span class="math inline">\(x\)</span> between 2 and 5?”<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Literally, “Is &lt;span class="math inline"&gt;\(x\)&lt;/span&gt; both greater than 2 and less than 5?”&lt;/p&gt;'><sup>16</sup></a>
</td>
</tr>
<tr class="odd">
<td><code>x &lt; 2 | x &gt; 6</code></td>
<td>“Is <span class="math inline">\(x\)</span> either less than 2 or greater than 6?”</td>
</tr>
<tr class="even">
<td><code>abs(x-5) &lt; 2</code></td>
<td>“Is <span class="math inline">\(x\)</span> within two units of 5?”</td>
</tr>
</tbody>
</table></div>
<div id="piecewise-functions" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> Piecewise functions<a class="anchor" aria-label="anchor" href="#piecewise-functions"><i class="fas fa-link"></i></a>
</h2>
<p>Having an ability to split up the domain of a function and provide different formula for each of the pieces allows us to
construct <strong><em>piecewise functions</em></strong>. To illustrate, the function <span class="math inline">\(h(x) \equiv |x|\)</span>. You’ll recognize this as the “absolute value” function. The intuitive algorithm is to “strip the negative sign, if any” from the input. But with the ability to divide the domain into pieces, we gain access to a less mysterious sort of arithmetic operation and can re-write <span class="math display">\[h(x) \equiv \left\{ 
\begin{array}{cl} x &amp; \text{for}\ 0 \leq x\\ -x &amp; \mbox{otherwise}\end{array}
\right.\]</span>
Or, in computer notation</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">0</span>, <span class="va">x</span>, <span class="op">-</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span></code></pre></div>
<p>Note that the absolute value function is built-in to R in the form of the <code><a href="https://rdrr.io/r/base/MathFun.html">abs()</a></code> function.</p>
<p>Less familiar is the <strong><em>Heaviside function</em></strong> which has important uses in physics and engineering:</p>
<p><span class="math display">\[\mbox{Heaviside}(x) \equiv \left\{ 
\begin{array}{cl} 0 &amp; \text{for}\ x &lt; 0\\1 &amp; \mbox{otherwise}\end{array}
\right.\]</span>
In computer notation, this is</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Heaviside</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span></code></pre></div>
<p><img src="CalcZ-notes_files/figure-html/unnamed-chunk-68-1.png" width="90%" style="display: block; margin: auto;">
The vertical gap between the two pieces is called a <strong><em>discontinuity</em></strong>. Intuitively, you cannot draw a discontinuous function <strong><em>without lifting the pencil from the paper</em></strong>. The Heaviside function has a discontinuity at <span class="math inline">\(x=0\)</span>.</p>
<p>Similarly, the <strong><em>ramp function</em></strong> (aka “ReLU”) is a kind of one-sided absolute value:
<span class="math display">\[\mbox{ramp}(x) \equiv \left\{ 
\begin{array}{cl} x &amp; \text{for}\ 0 \leq x\\0 &amp; \mbox{otherwise}\end{array}
\right.\]</span>
Or, in computer notation:</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ramp</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fl">0</span> <span class="op">&lt;</span> <span class="va">x</span>, <span class="va">x</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span>
<span class="fu">slice_plot</span><span class="op">(</span><span class="fu">ramp</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span>, <span class="fu">domain</span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="CalcZ-notes_files/figure-html/unnamed-chunk-69-1.png" width="90%" style="display: block; margin: auto;"></div>
<p>A linear combination of two input-shifted ramp functions gives a piecewise version of the sigmoid.</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sig</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="fu">ramp</span><span class="op">(</span><span class="va">x</span><span class="op">+</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">-</span> <span class="fu">ramp</span><span class="op">(</span><span class="va">x</span><span class="op">-</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span>
<span class="fu">slice_plot</span><span class="op">(</span><span class="fu">sig</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span>, <span class="fu">domain</span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="CalcZ-notes_files/figure-html/unnamed-chunk-70-1.png" width="90%" style="display: block; margin: auto;"></div>
<div class="intheworld">
<p>Figure <a href="#fig:gas-use-2"><strong>??</strong></a> is a graph of monthly natural gas use in the author’s household versus average temperature during the month. (Natural gas is measured in cubic feet, appreviated <em>ccf</em>.) <span style="float: right; padding-left: 50px;"><a name="1530" href="#1530"><img src="www/icons8-signpost.png" title="Location: 1530" width="12px"></a><span style="color: red; font-size: 6pt;">1530</span></span></p>
<p><img src="CalcZ-notes_files/figure-html/gas-use-2-1.png" width="90%" style="display: block; margin: auto;">
The graph looks somewhat like a hockey stick. A sloping straight-line dependence of ccf on temperature for temperatures below <span class="math inline">\(60^\circ\)</span>F and constant for higher temperatures. The shape originates from the dual uses of natural gas. Gas is used for cooking and domestic hot water, the demand for which is more of less independent of outdoor temperature at about 15 ccf per month. Gas is also used for heating the house, but that’s needed only when the temperature is less than about <span class="math inline">\(60^\circ\)</span>F.</p>
<p>We can accomplish the hockey-stick shape with a linear combination of the ramp() function and a constant. The ramp function represents gas used for heating, the constant is the other uses of gas (which are modeled as not depending on temperature. Overall, the model is <span class="math display">\[\text{gas_ccf}(x) \equiv 4.3\,  \mbox{ramp}(62-x)  + 15\]</span>
Even simpler is the model for the other uses of natural gas:
<span class="math display">\[\text{other_ccf}(x) \equiv 15\]</span>.</p>
</div>
<div class="todo">
<p>Do heating degree days in integration.</p>
<p>Similarly with power from wind turbines</p>
</div>
<p>Our last example concerns a bit of familiar technology: music synthesis. Generating a pure tone electronically is easy done using a sinusoid. Generating a note with rich instrumental timbre can be accomplished by a linear combination of sinusoids. Of course, the note will be localized in time. This could be accomplished by multiplying the sinusoids by a gaussian function envelope. <span style="float: right; padding-left: 50px;"><a name="1540" href="#1540"><img src="www/icons8-signpost.png" title="Location: 1540" width="12px"></a><span style="color: red; font-size: 6pt;">1540</span></span></p>
<p>It turns out that the gaussian function, <code><a href="https://rdrr.io/r/stats/Normal.html">dnorm()</a></code>, does not generate a realistic sound. Instead, a more complicated envelope is used, such as the <a href="https://en.wikipedia.org/wiki/Envelope_(music)">ADSR function</a> shown in Figure <a href="fun-piecewise.html#fig:ADSR">13.1</a>. The function has six (!) parameters: the time the key is pressed, the duration A of the “attack” phase when the sound amplitude is increasing in response to the impulse imposed on the key, a decay of duration D to an output level S that lasts until the key is released, then a decay to zero over duration R. It’s reasonable to think of the D and S phases as a piecewise linear approximation to exponential decay.</p>
<div class="figure" style="text-align: center">
<span id="fig:ADSR"></span>
<img src="www/adsr.png" alt="The ADSR envelope function used in music synthesis consists of 6 pieces including zero output before the key is pressed and after the pulse ends. [Source](https://en.wikipedia.org/wiki/Envelope_(music))" width="65%"><p class="caption">
Figure 13.1: The ADSR envelope function used in music synthesis consists of 6 pieces including zero output before the key is pressed and after the pulse ends. <a href="https://en.wikipedia.org/wiki/Envelope_(music)">Source</a>
</p>
</div>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="fun-multiple-inputs.html"><span class="header-section-number">12</span> Functions with multiple inputs</a></div>
<div class="next"><a href="modeling-cycle.html"><span class="header-section-number">14</span> Modeling cycle</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#fun-piecewise"><span class="header-section-number">13</span> Piecewise functions</a></li>
<li><a class="nav-link" href="#piecewise-functions"><span class="header-section-number">13.1</span> Piecewise functions</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="Not%20available/blob/master/Fun-piecewise.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="Not%20available/edit/master/Fun-piecewise.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>CalcZ Student Notes</strong>" was written by Daniel Kaplan. It was last built on 2021-08-05.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
